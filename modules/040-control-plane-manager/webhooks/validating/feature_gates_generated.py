# Code generated by go generate; DO NOT EDIT.
# This file is generated from feature_gates_map.yml

versions = {
    "1.29": {
        "kubelet": [
            "CPUManager",
            "MemoryManager",
        ],
        "apiserver": [
            "APIServerIdentity",
            "StorageVersionAPI",
        ],
        "kubeControllerManager": [
            "CronJobsScheduledAnnotation",
        ],
        "kubeScheduler": [
            "SchedulerQueueingHints",
        ],
    },
    "1.30": {
        "deprecated": [
            "ValidatingAdmissionPolicy",
            "AdmissionWebhookMatchConditions",
            "StructuredAuthenticationConfiguration",
        ],
        "kubelet": [
            "CPUManager",
            "MemoryManager",
            "KubeletCgroupDriverFromCRI",
            "LocalStorageCapacityIsolationFSQuotaMonitoring",
        ],
        "apiserver": [
            "APIServerIdentity",
            "JobManagedBy",
            "PortForwardWebsockets",
            "StorageVersionAPI",
            "CustomResourceFieldSelectors",
            "AuthorizeWithSelectors",
            "CoordinatedLeaderElection",
        ],
        "kubeControllerManager": [
            "CronJobsScheduledAnnotation",
            "JobSuccessPolicy",
            "CoordinatedLeaderElection",
        ],
        "kubeScheduler": [
            "SchedulerQueueingHints",
            "MatchLabelKeysInPodAffinity",
            "CoordinatedLeaderElection",
        ],
    },
    "1.31": {
        "deprecated": [
            "DynamicResourceAllocation",
            "InTreePluginAWSUnregister",
            "InTreePluginAzureDiskUnregister",
            "InTreePluginGCEUnregister",
        ],
        "forbidden": [
            "SecurityContextDeny",
        ],
        "kubelet": [
            "CPUManager",
            "MemoryManager",
            "DisableNodeKubeProxyVersion",
            "KubeletCgroupDriverFromCRI",
            "LocalStorageCapacityIsolationFSQuotaMonitoring",
            "ImageVolume",
        ],
        "apiserver": [
            "APIServerIdentity",
            "ImageVolume",
            "JobManagedBy",
            "PortForwardWebsockets",
            "StorageVersionAPI",
            "CustomResourceFieldSelectors",
            "AuthorizeWithSelectors",
            "CoordinatedLeaderElection",
            "RelaxedEnvironmentVariableValidation",
        ],
        "kubeControllerManager": [
            "CronJobsScheduledAnnotation",
            "JobSuccessPolicy",
            "CoordinatedLeaderElection",
            "JobBackoffLimitPerIndex",
        ],
        "kubeScheduler": [
            "SchedulerQueueingHints",
            "MatchLabelKeysInPodAffinity",
            "CoordinatedLeaderElection",
            "DynamicResourceAllocation",
        ],
    },
    "1.32": {
        "deprecated": [
            "SomeNewDeprecatedGate",
            "SomeNewDeprecatedGateTwo",
        ],
        "forbidden": [
            "SomeProblematicFeature",
        ],
        "kubelet": [
            "CPUManager",
            "MemoryManager",
            "ImageVolume",
        ],
        "apiserver": [
            "APIServerIdentity",
            "ImageVolume",
            "StorageVersionAPI",
        ],
        "kubeControllerManager": [
            "CronJobsScheduledAnnotation",
        ],
        "kubeScheduler": [
            "SchedulerQueueingHints",
        ],
    },
    "1.33": {
        "forbidden": [
            "SomeProblematicFeature",
        ],
        "kubelet": [
            "CPUManager",
            "MemoryManager",
            "ImageVolume",
            "KubeletPSI",
        ],
        "apiserver": [
            "APIServerIdentity",
            "ImageVolume",
            "DeploymentReplicaSetTerminatingReplicas",
            "StorageVersionAPI",
        ],
        "kubeControllerManager": [
            "CronJobsScheduledAnnotation",
            "DeploymentReplicaSetTerminatingReplicas",
        ],
        "kubeScheduler": [
            "SchedulerQueueingHints",
        ],
    },
}

def is_forbidden(version: str, feature_name: str) -> bool:
    if version not in versions:
        return False
    
    features = versions[version]
    return "forbidden" in features and feature_name in features["forbidden"]

def is_deprecated(version: str, feature_name: str) -> bool:
    if version not in versions:
        return False
    
    features = versions[version]
    return "deprecated" in features and feature_name in features["deprecated"]

def exists_in_component(version: str, component: str, feature_name: str) -> bool:
    if version not in versions:
        return False
    
    if component not in ["kubelet", "apiserver", "kubeControllerManager", "kubeScheduler"]:
        return False
    
    features = versions[version]
    return component in features and feature_name in features[component]

def is_feature_gate_deprecated_up_to_version(feature_gate: str, target_version: str) -> bool:
    try:
        target_major, target_minor = map(int, target_version.split('.'))
    except Exception:
        return False
    
    for version in versions.keys():
        try:
            major, minor = map(int, version.split('.'))
            if (major, minor) <= (target_major, target_minor):
                if is_deprecated(version, feature_gate):
                    return True
        except Exception:
            continue
    
    return False
