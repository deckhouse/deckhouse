// Code generated by go generate; DO NOT EDIT.
// This file is generated from feature_gates_map.yml

package hooks

import "fmt"

type ComponentFeatures struct {
	Deprecated            []string
	Forbidden             []string
	Kubelet               []string
	APIServer             []string
	KubeControllerManager []string
	KubeScheduler         []string
}

type FeatureGateInfo struct {
	Exists bool
	IsDeprecated bool
	IsForbidden  bool
}

func (cf *ComponentFeatures) IsForbidden(feature string) bool {
	for _, f := range cf.Forbidden {
		if f == feature {
			return true
		}
	}
	return false
}

func (cf *ComponentFeatures) IsDeprecated(feature string) bool {
	for _, f := range cf.Deprecated {
		if f == feature {
			return true
		}
	}
	return false
}

func (cf *ComponentFeatures) ValidateFeature(feature string) error {
	if cf.IsForbidden(feature) {
		return fmt.Errorf("feature gate %s is forbidden", feature)
	}
	if cf.IsDeprecated(feature) {
		return fmt.Errorf("feature gate %s is deprecated", feature)
	}
	return nil
}

func (cf *ComponentFeatures) GetFeatureGateInfo(component, featureName string) FeatureGateInfo {
	info := FeatureGateInfo{}
	
	if cf.IsDeprecated(featureName) {
		info.IsDeprecated = true
	}
	
	if cf.IsForbidden(featureName) {
		info.IsForbidden = true
	}

	var featureList []string
	switch component {
	case "kubelet":
		featureList = cf.Kubelet
	case "apiserver":
		featureList = cf.APIServer
	case "kubeControllerManager":
		featureList = cf.KubeControllerManager
	case "kubeScheduler":
		featureList = cf.KubeScheduler
	default:
		return info
	}
	
	for _, name := range featureList {
		if name == featureName {
			info.Exists = true
			return info
		}
	}
	
	return info
}

var FeatureGatesMap = map[string]ComponentFeatures{
	"1.29": {
		Kubelet: []string{
			"CPUManager",
			"MemoryManager",
		},
		APIServer: []string{
			"APIServerIdentity",
			"StorageVersionAPI",
		},
		KubeControllerManager: []string{
			"CronJobsScheduledAnnotation",
		},
		KubeScheduler: []string{
			"SchedulerQueueingHints",
		},
	},
	"1.30": {
		Deprecated: []string{
			"ValidatingAdmissionPolicy",
			"AdmissionWebhookMatchConditions",
			"StructuredAuthenticationConfiguration",
		},
		Kubelet: []string{
			"CPUManager",
			"MemoryManager",
			"KubeletCgroupDriverFromCRI",
			"LocalStorageCapacityIsolationFSQuotaMonitoring",
		},
		APIServer: []string{
			"APIServerIdentity",
			"StorageVersionAPI",
			"CustomResourceFieldSelectors",
			"AuthorizeWithSelectors",
			"CoordinatedLeaderElection",
		},
		KubeControllerManager: []string{
			"CronJobsScheduledAnnotation",
			"JobSuccessPolicy",
			"CoordinatedLeaderElection",
		},
		KubeScheduler: []string{
			"SchedulerQueueingHints",
			"MatchLabelKeysInPodAffinity",
			"CoordinatedLeaderElection",
		},
	},
	"1.31": {
		Deprecated: []string{
			"DynamicResourceAllocation",
			"InTreePluginAWSUnregister",
			"InTreePluginAzureDiskUnregister",
			"InTreePluginGCEUnregister",
		},
		Forbidden: []string{
			"SecurityContextDeny",
		},
		Kubelet: []string{
			"CPUManager",
			"MemoryManager",
			"DisableNodeKubeProxyVersion",
			"KubeletCgroupDriverFromCRI",
			"LocalStorageCapacityIsolationFSQuotaMonitoring",
		},
		APIServer: []string{
			"APIServerIdentity",
			"StorageVersionAPI",
			"CustomResourceFieldSelectors",
			"AuthorizeWithSelectors",
			"CoordinatedLeaderElection",
			"RelaxedEnvironmentVariableValidation",
		},
		KubeControllerManager: []string{
			"CronJobsScheduledAnnotation",
			"JobSuccessPolicy",
			"CoordinatedLeaderElection",
			"JobBackoffLimitPerIndex",
		},
		KubeScheduler: []string{
			"SchedulerQueueingHints",
			"MatchLabelKeysInPodAffinity",
			"CoordinatedLeaderElection",
			"DynamicResourceAllocation",
		},
	},
	"1.32": {
		Deprecated: []string{
			"SomeNewDeprecatedGate",
			"SomeNewDeprecatedGateTwo",
		},
		Forbidden: []string{
			"SomeProblematicFeature",
		},
		Kubelet: []string{
			"CPUManager",
			"MemoryManager",
		},
		APIServer: []string{
			"APIServerIdentity",
			"StorageVersionAPI",
		},
		KubeControllerManager: []string{
			"CronJobsScheduledAnnotation",
		},
		KubeScheduler: []string{
			"SchedulerQueueingHints",
		},
	},
	"1.33": {
		Forbidden: []string{
			"SomeProblematicFeature",
		},
		Kubelet: []string{
			"CPUManager",
			"MemoryManager",
		},
		APIServer: []string{
			"APIServerIdentity",
			"StorageVersionAPI",
		},
		KubeControllerManager: []string{
			"CronJobsScheduledAnnotation",
		},
		KubeScheduler: []string{
			"SchedulerQueueingHints",
		},
	},
}
