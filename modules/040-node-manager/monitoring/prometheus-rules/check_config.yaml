- name: d8.check-config
  rules:
    - alert: CheckCloudProviderConfig
      expr: |
        d8_check_cloud_provider_config > 0
      for: 1m
      labels:
        tier: cluster
        severity_level: "9"
      annotations:
        plk_markup_format: markdown
        plk_protocol_version: "1"
        summary: Provider-cluster-configuration in the cluster contains fields outside the schema.
        description: |
          Provider-cluster-configuration in the cluster contains fields outside the schema.
          Remove it from provider-cluster-configuration.

          ```bash
          kubectl -n d8-system exec -ti svc/deckhouse-leader -c deckhouse -- deckhouse-controller edit provider-cluster-configuration
          ```
    - alert: CheckStaticClusterConfig
      expr: |
        d8_check_static_cluster_config > 0
      for: 1m
      labels:
        tier: cluster
        severity_level: "9"
      annotations:
        plk_markup_format: markdown
        plk_protocol_version: "1"
        summary: Static-cluster-configuration in the cluster contains fields outside the schema.
        description: |
          Static-cluster-configuration in the cluster contains fields outside the schema.
          Remove it from static-cluster-configuration.

          ```bash
          kubectl -n d8-system exec -ti svc/deckhouse-leader -c deckhouse -- deckhouse-controller edit static-cluster-configuration
          ```
    - alert: CheckClusterConfig
      expr: |
        d8_check_cluster_config > 0
      for: 1m
      labels:
        tier: cluster
        severity_level: "9"
      annotations:
        plk_markup_format: markdown
        plk_protocol_version: "1"
        summary: Cluster-configuration in the cluster contains fields outside the schema.
        description: |
          Cluster-configuration in the cluster contains fields outside the schema.
          Remove it from cluster-configuration.

          ```bash
          kubectl -n d8-system exec -ti svc/deckhouse-leader -c deckhouse -- deckhouse-controller edit cluster-configuration
          ```
