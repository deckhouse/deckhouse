{{- $ciliumVersion := "1.14.5" }}
---
artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
from: quay.io/cilium/operator:v{{- $ciliumVersion }}@sha256:56cc1822109c4b34d192784a3106150cfb645252ce0b34aab67e9c820ac41bab
---
image: {{ $.ModuleName }}/{{ $.ImageName }}
fromImage: common/distroless
import:
- artifact: {{ $.ModuleName }}/builder-cert-artifact
  add: /etc/ssl/certs/ca-certificates.crt
  to: /etc/ssl/certs/ca-certificates.crt
  before: install
- artifact: {{ $.ModuleName }}/builder-gops-artifact
  add: /out/linux/amd64/bin/gops
  to: /bin/gops
  before: install
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /usr/bin/cilium-operator
  to: /usr/bin/cilium-operator
  before: install
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /LICENSE.all
  to: /LICENSE.all
  before: install
docker:
  USER: 64535
  ENTRYPOINT: ["/usr/bin/cilium-operator"]
