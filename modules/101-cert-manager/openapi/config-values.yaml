type: object
description: The module does not have any mandatory parameters.
properties:
  nodeSelector:
    type: object
    additionalProperties:
      type: string
    description: |
      The same as in the pods' `spec.nodeSelector` parameter in Kubernetes.

      If the parameter is omitted or `false`, it will be determined automatically.
    x-examples:
    - { "has-gpu": "true" }

  tolerations:
    description: |
      The same as in the pods' `spec.tolerations` parameter in Kubernetes.

      If the parameter is omitted or `false`, it will be determined automatically.
    type: array
    items:
      type: object
      properties:
        effect:
          type: string
        key:
          type: string
        operator:
          type: string
        tolerationSeconds:
          format: int64
          type: integer
        value:
          type: string
    x-examples:
    - [{"key":"dedicated.deckhouse.io","operator":"Equal","value":"cert-manager"}]

  email:
    type: string
    format: email
    description: |
      The email used for sending notifications by LetsEncrypt.
    x-examples: ["example@example.com"]

  cleanupOrphanSecrets:
    type: boolean
    default: false
    description: |
      Delete a secret with a certificate automatically if the corresponding Certificate resource was deleted from the cluster.
    x-examples: [true, false]

  disableLetsencrypt:
    type: boolean
    description: |
      Disable `letsencrypt` and `letsencrypt-staging` ClusterIssuer objects (if set to `true`).
    x-examples: [true, false]

  maxConcurrentChallenges:
    type: integer
    format: int32
    minimum: 0
    description: |
      The maximum number of challenges that can be scheduled as 'processing' at once. (default 60)
    x-examples: [25]

  enableCAInjector:
    type: boolean
    default: false
    x-examples: [true, false]
    description: |
      Enable CAInjector. It only needs to inject CA certs into `ValidatingWebhookConfiguration`, `MutatingWebhookConfiguration`, `CustomResourceDefinition` and `APIService`.
      Deckhouse does not use CAInjector, so you have to enable it only if you use custom CA injections in your services.

  ingressClassHttp01:
    type: string
    x-examples: ["nginx"]
    description: |
      The name of the `ingressClass` used to confirm ownership of domain using the ACME HTTP-01 challenges method.
      If the parameter is omitted, the default `ingressClass` is used.

  recursiveSettings:
    type: object
    description: |
      Parameters for using recursive DNS servers, which are used to check the existence of a DNS record, before initiating the domain ownership verification process using the ACME DNS-01 method.
    x-examples:
      - nameservers: ["8.8.8.8:53", "https://1.1.1.1"]
        useOnlyRecursive: true
    x-kubernetes-validations:
      - rule: "self.useOnlyRecursive == false || size(self.nameservers) >= 1"
        message: "At least one nameserver must be specified when useOnlyRecursive is true"
    properties:
      nameservers:
        type: array
        description: |
          List of recursive DNS servers (IP:port or HTTPS URLs).
        items:
          type: string
          pattern: "^(?:[0-9]{1,3}(?:\\.[0-9]{1,3}){3}:\\d{1,5}|https?://[^\\s]+)$"
      useOnlyRecursive:
        type: boolean
        description: |
          When set to true, only the specified recursive DNS servers will be used to check for the existence of a record in the DNS before starting the domain ownership verification process.
        default: false
