# File generated by "tools/linstor_scheduler_webhook.go" DO NOT EDIT.
# To generate run 'make generate'
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: linstor-scheduler-admission
  {{- include "helm_lib_module_labels" (list . (dict "app" "linstor-scheduler-admission")) | nindent 2 }}
webhooks:
- name: scheduler-admission.linstor.deckhouse.io
  namespaceSelector:
    matchExpressions:
    - key: kubernetes.io/metadata.name
      operator: NotIn
      values:
      - kube-basic-auth
      - d8-cloud-provider-openstack
      - d8-cloud-provider-vsphere
      - d8-istio
      - kube-system
      - d8-metallb
      - d8-keepalived
      - d8-network-gateway
      - d8-delivery
      - d8-flant-integration
      - d8-system
      - d8-admission-policy-engine
      - d8-cni-cilium
      - d8-cloud-provider-aws
      - d8-cloud-provider-azure
      - d8-cloud-provider-gcp
      - d8-cloud-provider-yandex
      - d8-local-path-provisioner
      - d8-cni-flannel
      - d8-cni-simple-bridge
      - d8-cloud-instance-manager
      - d8-linstor
      - d8-snapshot-controller
      - d8-ceph-csi
      - d8-cert-manager
      - d8-user-authz
      - d8-user-authn
      - d8-operator-prometheus
      - kube-prometheus-pushgateway
      - d8-descheduler
      - d8-ingress-nginx
      - d8-log-shipper
      - d8-pod-reloader
      - d8-chrony
      - d8-virtualization
      - d8-cdi
      - d8-okmeter
      - d8-openvpn
  rules:
  - apiGroups:   [""]
    apiVersions: ["v1"]
    operations:  ["CREATE"]
    resources:   ["pods"]
    scope:       "*"
  clientConfig:
    service:
      namespace: "d8-linstor"
      name: "linstor-scheduler-admission"
      path: "/mutate"
      port: 4443
    caBundle: {{ .Values.linstor.internal.webhookCert.ca | b64enc }}
  admissionReviewVersions: ["v1", "v1beta1"]
  sideEffects: None
  failurePolicy: Ignore
  timeoutSeconds: 10
