- name: d8.kernel-requirements
  rules:
    - alert: D8NodeHasUnmetKernelRequirements
      expr: >-
        d8_node_kernel_does_not_satisfy_requirements == 1
      for: 5m
      labels:
        severity_level: "9"
        tier: cluster
      annotations:
        plk_markup_format: markdown
        plk_protocol_version: "1"
        plk_create_group_if_not_exists__cluster_has_problems_with_unmet_kernel_requirements_alerts: "D8ClusterHasProblemsWithUnmetKernelRequirements,tier=cluster,prometheus=deckhouse,kubernetes=~kubernetes"
        plk_grouped_by__cluster_has_problems_with_unmet_kernel_requirements_alerts: "D8ClusterHasProblemsWithUnmetKernelRequirements,tier=cluster,prometheus=deckhouse,kubernetes=~kubernetes"
        summary: Node {{ $labels.node }} has unmet kernel requirements
        description: |-
          Kernel version {{ $labels.kernel_version }} on node {{ $labels.node }} does not meet constraint {{ $labels.constraint }} for module {{ $labels.affected_module }}.
