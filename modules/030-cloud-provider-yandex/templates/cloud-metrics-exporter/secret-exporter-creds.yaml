{{- if .Values.cloudProviderYandex.cloudMetricsExporterEnabled }}
apiVersion: v1
kind: Secret
metadata:
  name: d8-yandex-cloud-metrics-exporter-app-creds
  namespace: d8-monitoring
  {{- include "helm_lib_module_labels" (list . (dict "app" "yandex-cloud-metrics-exporter")) | nindent 2 }}
  annotations:
    checksum/service-account: {{ .Values.cloudProviderYandex.internal.exporter.serviceAccountChecksum | quote }}
    service-account-api-key/id: {{ .Values.cloudProviderYandex.internal.exporter.apiKeyID | quote }}
type: Opaque
data:
  api-key: {{ .Values.cloudProviderYandex.internal.exporter.apiKey | b64enc | quote }}
  folder-id: {{ .Values.cloudProviderYandex.internal.providerClusterConfiguration.provider.folderID | b64enc | quote }}
{{- end }}
