spec:
  versions:
    - name: v1
      schema:
        openAPIV3Schema:
          description: |
            VolumeSnapshot — это пользовательский запрос на создание снимка тома на определённый момент времени или привязку к уже существующему снимку.
          properties:
            apiVersion:
              description: |
                APIVersion определяет версию схемы объекта. Сервер может преобразовать известные схемы во внутреннее представление и отклонять неизвестные.
            kind:
              description: |
                Kind — строка, представляющая REST-ресурс. Сервер может определить её на основе запроса. Неизменяемо. Формат CamelCase.
            spec:
              description: |
                Определяет желаемые характеристики снимка, запрашиваемые пользователем.
              properties:
                source:
                  description: |
                    Указывает, откуда будет создан снимок. Неизменяемое поле. Обязательное.
                  properties:
                    persistentVolumeClaimName:
                      description: |
                        Имя PVC, представляющего том, из которого должен быть создан снимок. Должен находиться в том же namespace, что и VolumeSnapshot. Указывается, если снимок нужно создать. Неизменяемое поле.
                    volumeSnapshotContentName:
                      description: |
                        Имя уже существующего VolumeSnapshotContent. Указывается, если снимок уже существует и требуется только объект-представление в Kubernetes. Неизменяемое поле.
                volumeSnapshotClassName:
                  description: |
                    Имя VolumeSnapshotClass, запрошенного VolumeSnapshot. Если не указано, будет использоваться класс по умолчанию для соответствующего CSI-драйвера. Если существует несколько классов по умолчанию для одного драйвера — создание снимка завершится с ошибкой. Пустая строка недопустима.
            status:
              description: |
                Представляет текущую информацию о снимке. Перед использованием снимка необходимо убедиться, что привязка между VolumeSnapshot и VolumeSnapshotContent выполнена.
              properties:
                boundVolumeSnapshotContentName:
                  description: |
                    Имя VolumeSnapshotContent, к которому привязан данный VolumeSnapshot. Если не указано — привязка не выполнена. В целях безопасности перед использованием снимка нужно убедиться, что оба объекта ссылаются друг на друга.
                creationTime:
                  description: |
                    Метка времени создания снимка подсистемой хранения. Заполняется контроллером при динамическом создании или получена от CSI-драйвера. Может быть не задана, если время неизвестно.
                error:
                  description: |
                    Последняя ошибка при создании снимка, если была. Может быть полезна контроллерам приложений для принятия решений. При успешной попытке ошибка очищается.
                  properties:
                    message:
                      description: |
                        Сообщение об ошибке. Может логироваться, не должно содержать конфиденциальные данные.
                    time:
                      description: |
                        Время возникновения ошибки.
                readyToUse:
                  description: |
                    Показывает, готов ли снимок к использованию для восстановления тома. Заполняется CSI-драйвером. Если не указано — готовность неизвестна.
                restoreSize:
                  description: |
                    Минимальный размер тома, необходимый для восстановления из снимка. Если не указан — размер неизвестен. При восстановлении том должен быть не меньше restoreSize.

    - name: v1beta1
      schema:
        openAPIV3Schema:
          description: |
            VolumeSnapshot — это пользовательский запрос на создание снимка тома на определённый момент времени или привязку к уже существующему снимку.
          properties:
            apiVersion:
              description: |
                APIVersion определяет версию схемы объекта. Сервер может преобразовать известные схемы во внутреннее представление и отклонять неизвестные.
            kind:
              description: |
                Kind — строка, представляющая REST-ресурс. Сервер может определить её на основе запроса. Неизменяемо. Формат CamelCase.
            spec:
              description: |
                Определяет желаемые характеристики снимка, запрашиваемые пользователем.
              properties:
                source:
                  description: |
                    Указывает, откуда будет создан снимок. Неизменяемое поле. Обязательное.
                  properties:
                    persistentVolumeClaimName:
                      description: |
                        Имя PVC, представляющего том, из которого должен быть создан снимок. Должен находиться в том же namespace, что и VolumeSnapshot. Указывается, если снимок нужно создать. Неизменяемое поле.
                    volumeSnapshotContentName:
                      description: |
                        Имя уже существующего VolumeSnapshotContent. Указывается, если снимок уже существует и требуется только объект-представление в Kubernetes. Неизменяемое поле.
                volumeSnapshotClassName:
                  description: |
                    Имя VolumeSnapshotClass, запрошенного VolumeSnapshot. Если не указано, будет использоваться класс по умолчанию для соответствующего CSI-драйвера. Если существует несколько классов по умолчанию для одного драйвера — создание снимка завершится с ошибкой. Пустая строка недопустима.
            status:
              description: |
                Представляет текущую информацию о снимке. Перед использованием снимка необходимо убедиться, что привязка между VolumeSnapshot и VolumeSnapshotContent выполнена.
              properties:
                boundVolumeSnapshotContentName:
                  description: |
                    Имя VolumeSnapshotContent, к которому привязан данный VolumeSnapshot. Если не указано — привязка не выполнена. В целях безопасности перед использованием снимка нужно убедиться, что оба объекта ссылаются друг на друга.
                creationTime:
                  description: |
                    Метка времени создания снимка подсистемой хранения. Заполняется контроллером при динамическом создании или получена от CSI-драйвера. Может быть не задана, если время неизвестно.
                error:
                  description: |
                    Последняя ошибка при создании снимка, если была. Может быть полезна контроллерам приложений для принятия решений. При успешной попытке ошибка очищается.
                  properties:
                    message:
                      description: |
                        Сообщение об ошибке. Может логироваться, не должно содержать конфиденциальные данные.
                    time:
                      description: |
                        Время возникновения ошибки.
                readyToUse:
                  description: |
                    Показывает, готов ли снимок к использованию для восстановления тома. Заполняется CSI-драйвером. Если не указано — готовность неизвестна.
                restoreSize:
                  description: |
                    Минимальный размер тома, необходимый для восстановления из снимка. Если не указан — размер неизвестен. При восстановлении том должен быть не меньше restoreSize.
