---
title: "Релизы"
---

## v1.11.7

### Новые возможности

* Добавлен новый предустановленный шаблон `Deckhouse Virtualization Platform on bare metal` (установка DVP на статические узлы).

### Исправления

* В предустановленный шаблон `Deckhouse Platform Certified Security Edition on Deckhouse Virtualization Platform` добавлена отсутствующая конфигурация Реестра контейнеров, из-за чего была невозможна установка кластеров из этого шаблона.

### Прочее

* Исправлены обнаруженные уязвимости в компонентах модуля.
* Предустановленный шаблон `Deckhouse Virtualization Platform` переименован в `Deckhouse Platform Certified Security Edition on Deckhouse Virtualization Platform` (создание кластеров Deckhouse Platform Certified Security Edition в DVP).
* Интерфейс Администрирования кластера обновлен до актуальной версии 1.39.3.
* В документацию модуля добавлена информация об операциях присоединения и отсоединения кластеров. А также информация о том, как перенести кластер из одного рабочего пространства в другое.

## v1.11.6

### Новые возможности

* Добавлен новый предустановленный шаблон для DVP (создание кластеров Deckhouse Platform Certified Security Edition в DVP).

### Исправления

* Для всплывающих окон с ошибками добавлена кнопка закрытия.
* Исправлена проблема, из-за которой было невозможно выбрать несколько раз одну и ту же запись из каталога в разных параметрах в форме кластера.
* Исправлена ошибка восстановления каталога из архива.
* Устранена проблема, из-за которой при изменении шаблона кластера появлялось всплывающее окно с входящими изменениями.
* Исправлена ошибка, из-за которой не отображались значения по умолчанию для параметров в редакторе шаблона.

### Прочее

* Интерфейс администрирования кластера обновлен до актуальной версии 1.39.1.

## v1.11.5

### Новые возможности

* В конструктор шаблонов для параметра «Выбор из каталога» добавлен тип «Двойной список», который позволяет в форме создания кластера выбирать одним кликом сразу все записи из каталога.

### Исправления

* Исправлена ошибка, из-за которой отображался пустой селектор режима синхронизации групп ресурсов в форме кластера, сохраненного без установки.

## v1.11.4

### Исправления

* Устранены проблемы с работой TCP-туннеля на стороне коннектора при использовании Citrix NetScaler для фильтрации и балансировки трафика между управляющим и подчиненным кластерами.

## v1.11.3

### Новые возможности

* Добавлена возможность указания нескольких серверов PostgreSQL в конфигурации модуля при использовании внешней базы данных в режиме кластера.

### Исправления

#### Интерфейс

* Решена проблема с внезапным появлением сообщения «Сессия истекла» путем добавления механизма периодического обновления сессии.
* Исправлена ошибка, из-за которой невозможно было изменить имя кластера.
* Устранена ошибка загрузки вкладки «Администрирование кластера», возникающая, когда пользователь является участником большого количества групп (более 300) на сервере аутентификации.
* Исправлена проблема, из-за которой при присоединении кластера пропадала часть логов, что затрудняло определение причины ошибки операции присоединения.
* Исправлено отображение картинок в интерфейсе Администрирования кластера.
* Обновлен интерфейс Администрирования кластера до актуальной версии 1.38.4.

#### Менеджер кластеров

* Исправлена критическая ошибка запуска менеджера кластеров в ситуации, когда управляющий кластер развернут из приватного реестра контейнеров с самоподписанным TLS-сертификатом.
* Устранена проблема, при которой в подчиненном кластере при присоединении включался устаревший модуль `deckhouse-commander-agent` вместо `commander-agent`.

#### Прочее

* Исправлены ошибки, возникающие при первом запуске миграций на пустой базе данных.

### Прочее

* В документацию модуля добавлены рекомендации по использованию внешней инсталляции PostgreSQL в производственных средах.

## v1.11.2

### Исправления

#### Интерфейс

* Исправлена ошибка создания и редактирования кластера из шаблона, в котором используются входные параметры типа «Выбор простых значений» с включённым множественным выбором.
* Решена проблема с неправильной нумерацией версий импортированных шаблонов.
* Устранена ситуация, когда отображался запрос на подтверждение деструктивных изменений в кластере, для которого была запущена операция удаления.
* Теперь корректно отображаются ошибки валидации входных параметров, для которых задано «Регулярное выражение валидации значения».
* В форме редактирования шаблона на странице группы ресурсов устранена проблема с блокировкой переключателя «Разрешить управлять в кластере».
* Исправлено отображения времени посещения пользователя в списке пользователей.

### Прочее

* Обновлены зависимости компонентов модуля для исправления обнаруженных уязвимостей.
* Обновлен интерфейс Deckhouse Platform Certified Security Edition UI до версии 1.37.4 на вкладке «Администрирование» кластера.
* Актуализирована документация по настройке сбора логов истории изменений с помощью модуля `log-shipper`.

## v1.11.1

### Новые возможности

* RBAC: Встроенный Deckhouse Platform Certified Security Edition UI (console) на вкладке «Администрирование» кластера будет адаптироваться под права пользователя Коммандера.

### Исправления

* Исправление ошибки при подлючении кластеров к Deckhouse Commander после обновления на 1.11
* Минорные исправления

## v1.11.0

### Новые возможности

#### Интерфейс

* Появилась поддержка быстрой отмены операций с кластером.
* Экспериментальная поддержка темной темы. Переключатель — в диалоге пользователя.

#### Модуль

* Добавлена поддержка авторизации с помощью TLS-сертификатов (`cert auth`) при подключении к базе данных PostgreSQL.

#### Шаблоны

* В предустановленные шаблоны добавлены параметры настройки HTTP-прокси.

### Исправления

#### Интерфейс

* Кластер больше не «зависает» в статусе «Ожидает удаления» при попытке удалить в ручном режиме применения изменений.
* Исправлена проблема, из-за которой было невозможно отсоединение кластера, находящегося в состоянии «Ожидает изменения» или «Деструктивные изменения».
* Сверки кластера теперь выполняются согласно настроенному интервалу. Была проблема, когда интервал игнорировался, если кластер находился в состоянии «Неизвестно».
* 500-ошибки сервера теперь корректно отображаются в UI.
* Теперь, если входной параметр не обязателен и указана минимальная длина, разрешены пустые значения.
* Конфигурация кластера (YAML) при рендеринге шаблона теперь нормализуется и корректно форматируется.
* При удалении записей из каталога теперь записи сразу пропадают из списка без необходимости обновлять страницу.
* Исправили перевод для ошибок удаления рабочих пространств.
* Отключен запрет редактирования входных параметров кластера, находящегося в статусе «Ошибка удаления». Это могло помешать пользователю изменить необходимые для удаления кластера входные параметры.

#### Шаблоны

* Удалены лишние пробелы в параметрах SSH, из-за которых возникало некорректное форматирование SSH-ключа в конфигурации кластера.
* В шаблоне статического кластера переименован пользователь по умолчанию (`commander` вместо `deckhouse`).

#### Модуль

* Увеличен допустимый размер заголовков, чтобы токены с большим количеством групп не вызывали ошибку с кодом 429.
* Исправлена проблема подстановки пустого CA сертификата сервера в параметры шаблона.
* Исправили хук копирования пользовательского TLS-сертификата.

### Прочее

* Коммандер больше не будет работать по HTTP. Теперь режим работы по HTTPS является обязательным в целях безопасности. Если HTTPS отключен в кластере, веб-интерфейс Коммандера будет недоступен.
* Отключена поддержка basic auth. Необходимо использовать модуль `user-authn` или внешнюю аутентификацию для идентификации пользователей.
* В документацию добавлена страница с описаниями изменений для каждого релиза (Release Notes).
* Ручные изменения манифестов dhctl-серверов пользователем в управляющем кластере теперь будут принудительно перезаписываться менеджером кластеров.
* Уменьшены таймауты ожидания выполнения некоторых фаз установки кластера.
* Встроенный Deckhouse Platform Certified Security Edition UI (console) обновлен до версии 1.37.2
* Обновлены образы компонентов модуля с целью исправления уязвимостей.

## v1.10.7

### Исправления

* Устранена ошибка, которая приводила к неработоспособности вкладки «Администрирование» в кластерах, если какие-то кластеры находились в состоянии «Ошибка создания».
* Исправлена ошибка, возникавшая при попытке перевести кластер на новую версию шаблона на вкладке «Кластеры» на странице шаблона.
* Устранена проблема, из-за которой невозможно было отсоединить кластер, если в его настройках выбран ручной режим применения изменений.

### Прочее

* Встроенный Deckhouse Platform Certified Security Edition UI (console) обновлен до версии 1.35.1

## v1.10.6

### Исправления

* Исправлена ошибка при импорте каталогов в «Инвентаре».

### Прочее

* Встроенный Deckhouse Platform Certified Security Edition UI (console) обновлен до версии 1.35.0

## v1.10.5

### Новые возможности

#### Менеджер кластеров

* Добавлена поддержка работы через прокси в управляющем кластере. Менеджер кластеров теперь использует параметры прокси для подключений, если они указаны в настройках управляющего кластера.

### Исправления

#### Интерфейс

* Исправлена ошибка валидации, возникающая при смене шаблона или изменении входных параметров на странице кластера и переключении между вкладками с группами ресурсов.
* Исправлена проблема бесконечного переподключения к серверу по websocket после перезапуска redis.
* Исправлено отображение кнопки «Повторить операцию» при неудачном деструктивном изменении кластера.
* На вкладке Kubernetes кластера исправлено отображение группы API ресурсов, примененных агентом (показывалась только версия).
* Исправлена ошибка, возникающая при попытке удаления рабочего пространства с архивными кластерами.

### Прочее

* Обновлены зависимости в компонентах модуля с целью исправления обнаруженных уязвимостей.

## v1.10.4

### Исправления

#### Интерфейс

* Исправлена ошибка импорта шаблона путем вставки текста.
* Левая кнопка (original) в отображении изменений конфигурации кластера теперь работает корректно.
* Исправлена ошибка, возникающая при использовании скрытых входных параметров в шаблоне.
* Переход на страницу удаляющегося кластера во вкладке «Кластеры» в шаблоне теперь работает корректно.
* Для неизменяемых входных параметров на странице кластера убрана возможность выбора значения из другого каталога.

#### Менеджер кластеров

* При валидации конфигурации кластера теперь отображаются ошибки рендеринга go-template, раньше показывались только ошибки валидации.

#### Шаблоны

* Во всех предустановленных шаблонах удалено значение по умолчанию (license-token) для параметра `dockerLogin`, что вызывало неочевидные ошибки валидации конфигурации кластера при незаполненном поле `dockerPassword`.

## v1.10.3

### Исправления

* Исправлены ошибки рендеринга шаблона кластера, связанные с наличием в yaml-ах лишних разделителей документов, а также в случаях когда рендерится пустая группа ресурсов.
* При миграции предустановленных шаблонов не будет производиться миграция ранее архивированных шаблонов в инсталляции.

## v1.10.2

### Новые возможности

#### Шаблоны

* Во все предустановленные шаблоны добавлен параметр `sudoPassword`.

### Исправления

#### Интерфейс

* Исправлена проблема переключения между кластерами во вкладке Администрирование, когда при переходе на вкладку Администрирование другого кластера отображались данные первого.
* Иногда во вкладке Администрирование не загружалась вкладка «Обзор». Теперь этой проблемы нет.
* Исправлена ошибка 403 при попытке открытия документации API.
* Значения по умолчанию из шаблона теперь проставляются во входные параметры при создании кластера, как и раньше.
* Убран лишний текст в ошибке валидации уникальных значений каталога в инвентаре.
* Параметры в схеме каталога в с типом пароль теперь скрыты из заголовка записи.
* Исправлено отображение значений при смене типа поля в схеме данных каталога.
* Исправлены ошибки в консоли браузера при создании кластера.
* Графики прикладного кластера больше не уплывают за экран на мониторах с маленьким разрешением.
* Кластера в списке больше не дублируются. Раньше при нажатии на кнопку «Показать N новых кластера» в списке кластеров показывались уже существующие кластера.
* Исправлено дублирование версии шаблона при сохранении формы одновременно разными пользователями.
* При удалении кластера больше не пропадает вкладка «Обзор».
* Добавлено уточнение ошибки некорректного имени идентификатора каталога – что именно заполнено некорректно.
* Исправлены скачки контента на странице при зуме 90% в браузере.

#### Менеджер кластеров

* Исправлена проблема, когда коннектор нагружал процессор на 100% из-за отсутствующих подключений от агента.

#### Модуль

* Исправлена проблема запуска redis из-за отсутствующего serviceAccount.

#### Шаблоны

* Исправлены опечатки в предустановленном шаблоне VMware Cloud Director, параметр `internalNetworkCIDR` вынесен во входные параметры.

### Прочее

* Встроенная консоль обновлена до актуальной версии 1.34.4

## v1.10.1

### Новые возможности

#### Интерфейс

* Добавлено отображение изменений «Разрешить управлять в кластере» в аудитах.
* В меню кластера добавлен пункт «Параметры обработки», который позволяет одним кликом открыть настройки кластера.

#### Менеджер кластеров

* Добавлена возможность использования поля `sudoPassword` в настройках подключения к кластеру (также для работы `sudoPassword` со стороны dhctl требуется версия не ниже 1.68.3).

### Исправления

#### Интерфейс

* Исправлен рендеринг шаблонов с пользовательским сертификатом реестра контейнеров, приводивший к ошибке установки `invalid cert in CA PEM`.
* Исправлена невозможность сохранить форму, пока не заполнены все обязательные поля (восстановлено предыдущее состояние, можно нажать сохранить, после чего будут подсвечены ошибки валидации, если есть).
* Исправлено некорректное отображение диффов групп ресурсов после запроса к рендереру.
* При обновлении режима управления у группы ресурсов кластера не создавалась запись аудита.
* Исправлена ошибка 403 при попытке открытия документации API.
* Добавлен вывод недостающих данных в аудитах для корректного отображения изменений.

#### Модуль

* Исправлены найденные уязвимости в образах модуля.
* Удален компонент redis-exporter для сбора метрик redis в связи с большим количеством незакрытых уязвимостей.

#### Менеджер кластеров

* Исправлены ошибки, возникающие когда в кластере отсутствует предварительно запущенный инстанс dhctl, в случае когда образ dhctl не успевает скачаться за 1 минуту (таймаут поднят до 5 минут). Ошибка часто возникала у пользователей конфигураций с включенным `devBranch`.

## v1.10.0

### Новые возможности

#### Интерфейс

* Появился режим синхронизации Kubernetes-ресурсов в кластере. Можно включать или отключать синхронизацию ресурсов в каждой группе. В шаблоне можно этот режим задать.
* Ресурсы можно «отпустить» под управление внутри кластера без удаления:
Если группа ресурсов не контролируется, агент не удалит исчезнувшие в ней ресурсы, а пометит их лейблом `agent.commander.deckhouse.io/is-orphan`.
Если группа контролируется, то ресурсы удаляются, как раньше.
* Переделан контроль обработки кластера кластер-менеджером:
В настройках кластера (Конфигурация -> Операции с инфраструктурой -> Настройки) можно выбрать «Режим применения изменений». Если выбран «Вручную»,  любые изменения (converge) кластера потребуют от пользователя подтверждения операции. Надо будет нажать на кнопку, чтобы операция запустилась.
«Авто» работает как раньше — с пользователя попросят подтвердить изменения, только если они деструктивные.
* Удалить рабочее пространство теперь возможно.
Но есть условие: вначале нужно избавиться от кластеров. Их можно удалить, отсоединить или перенести в другое рабочее пространство. Остальные данные — шаблоны кластеров и инвентарь — удаляются **безвозвратно**.
* В архиве все списки теперь по умолчанию сортируются по дате удаления начиная с самых свежих.

#### Сервер

* Все логи сервера API теперь выводятся в структурированном JSON-формате. Парсить системами сбора и анализировать логи стало удобнее.
* В аудит-логи добавлена информация о конкретных изменениях (поле audited_changes) и IP-адрес пользователя.
Например, в логах будут отражены предыдущие и текущие значения: версии шаблона, входных параметров, интервала синхронизации кластера и другие изменения, не содержащие чувствительные данные.

#### Шаблоны

* Добавлен новый предустановленный шаблон для Huawei Cloud (cloud.ru)

### Исправления

#### Документация

* Убраны устаревшие сведения про фиксированную версию dhctl
* Добавлена более краткое и понятное объяснение структуры кластеров.
* Требования к сетевой доступности коммандера и кластеров прописаны текстом в дополнении к тому, что изображено на схеме
* Явно прописано, что управление интервалом сверки управляет менеджером кластера, но не влияет работу агента
* Удалена инструкция миграции с модуля deckhouse-commander (1.4) на модуль commander (1.5)
* Исправлена ссылка на схему входных параметров (якорь внутри той же страницы)

