---
apiVersion: deckhouse.io/v1
kind: ClusterConfiguration
clusterType: Cloud
cloud:
  provider: OpenStack
  prefix: 'candi-${PREFIX}'
podSubnetCIDR: 10.111.0.0/16
serviceSubnetCIDR: 10.222.0.0/16
kubernetesVersion: '${KUBERNETES_VERSION}'
defaultCRI: '${CRI}'
clusterDomain: "cluster.local"
---
apiVersion: deckhouse.io/v1
kind: InitConfiguration
deckhouse:
  devBranch: '${DEV_BRANCH}'
  imagesRepo: dev-registry.deckhouse.io/sys/deckhouse-oss
  registryDockerCfg: '${DECKHOUSE_DOCKERCFG}'
---
apiVersion: deckhouse.io/v1
kind: OpenStackClusterConfiguration
layout: Standard
sshPublicKey: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHv4oItTf1HuXU5T7Ly8/8Fpaxzf0cuAmLElP9R+R+A0 root@9c60180db21d"
zones:
  - ru-3a
standard:
  internalNetworkDNSServers:
    - 8.8.8.8
  internalNetworkCIDR: 192.168.195.0/24
  internalNetworkSecurity: false
  externalNetworkName: "external-network"
provider:
  authURL: 'https://api.selvpc.ru/identity/v3'
  domainName: '48348'
  tenantID: 'ceda80a1b33844adb1cbddd20ee93585'
  username: 'deckhouse-e2e'
  password: '${OS_PASSWORD}'
  region: 'ru-3'
masterNodeGroup:
  replicas: ${MASTERS_COUNT}
  instanceClass:
    rootDiskSize: 50
    flavorName: e2e
    imageName: "redos-STD-MINIMAL-8.0.0"
  volumeTypeMap:
    ru-3a: "fast.ru-3a"
nodeGroups:
- name: cp
  nodeTemplate:
    labels:
      node-role.kubernetes.io/worker: ''
  replicas: 1
  instanceClass:
    mainNetwork: 'candi-${PREFIX}'
    rootDiskSize: 50
    flavorName: e2e
    imageName: "redos-STD-MINIMAL-8.0.0"
  volumeTypeMap:
    ru-3a: "fast.ru-3a"
---
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: deckhouse
spec:
  version: 1
  enabled: true
  settings:
    highAvailability: false
---
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: istio
spec:
  version: 2
  enabled: true
  settings:
---
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: flant-integration
spec:
  enabled: false
---
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: global
spec:
  enabled: true
  settings:
    modules:
      publicDomainTemplate: "%s.k8s.smoke.flant.com"
      placement:
        customTolerationKeys:
          - node
  version: 1
---
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: openvpn
spec:
  version: 2
  enabled: true
  settings:
