---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: modulepulloverrides.deckhouse.io
  labels:
    heritage: deckhouse
    app.kubernetes.io/name: deckhouse
    app.kubernetes.io/part-of: deckhouse
spec:
  group: deckhouse.io
  names:
    kind: ModulePullOverride
    listKind: ModulePullOverrideList
    plural: modulepulloverrides
    shortNames:
      - mpo
    singular: modulepulloverride
  scope: Cluster
  versions:
    - additionalPrinterColumns:
        - description: When the module was last updated.
          format: date-time
          jsonPath: .status.updatedAt
          name: Updated
          type: date
        - description: Detailed description.
          jsonPath: .status.message
          name: msg
          type: string
      name: v1alpha1
      schema:
        openAPIV3Schema:
          description: ModulePullOverride defines the configuration.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: Spec defines the behavior of a ModulePullOverride.
              properties:
                imageTag:
                  description: Module container image tag, which will be pulled.
                  type: string
                  x-doc-examples:
                    - v1.2.3
                rollback:
                  default: false
                  description: Indicates whether the module release should be rollback after deleting mpo.
                  type: boolean
                  x-doc-examples:
                    - false
                scanInterval:
                  default: 15s
                  description: Scan interval for checking the image digest. If the digest changes, the module is updated.
                  type: object
                  x-doc-examples:
                    - 15s
                source:
                  description: Reference to the ModuleSource with the module.
                  type: string
                  x-doc-examples:
                    - deckhouse-registry
              required:
                - imageTag
              type: object
            status:
              description: Status of a ModulePullOverride.
              properties:
                imageDigest:
                  description: Digest of the module image.
                  type: string
                message:
                  description: Details of the resource status.
                  type: string
                updatedAt:
                  description: When the module was last updated.
                  format: date-time
                  type: string
                weight:
                  description: Module weight.
                  type: integer
              type: object
          required:
            - spec
          type: object
      served: true
      storage: false
      subresources:
        status: {}
      deprecated: true
    - additionalPrinterColumns:
        - description: When the module was last updated.
          format: date-time
          jsonPath: .status.updatedAt
          name: Updated
          type: date
        - description: Detailed description.
          jsonPath: .status.message
          name: Message
          type: string
        - description: Indicates whether the module release should be rollback after deleting mpo.
          jsonPath: .spec.rollback
          name: Rollback
          type: string
      name: v1alpha2
      schema:
        openAPIV3Schema:
          description: |-
            ModulePullOverride defines the resource configuration for downloading specific versions of Deckhouse modules.

            Caution. This resource is intended for development and debugging environments only.
            Using it in production clusters is not recommended. Support for the resource might be removed in future Deckhouse Kubernetes Platform versions.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: Spec defines the behavior of a ModulePullOverride.
              properties:
                imageTag:
                  description: Module container image tag, which will be pulled.
                  type: string
                  x-doc-examples:
                    - v1.2.3
                rollback:
                  default: false
                  description: Indicates whether the module release should be rollback after deleting mpo.
                  type: boolean
                  x-doc-examples:
                    - false
                scanInterval:
                  default: 15s
                  description: Scan interval for checking the image digest. If the digest changes, the module is updated.
                  type: object
                  x-doc-examples:
                    - 15s
              required:
                - imageTag
              type: object
            status:
              description: Status of a ModulePullOverride.
              properties:
                imageDigest:
                  description: Digest of the module image.
                  type: string
                message:
                  description: Details of the resource status.
                  type: string
                updatedAt:
                  description: When the module was last updated.
                  format: date-time
                  type: string
                weight:
                  description: Module weight.
                  type: integer
              type: object
          required:
            - spec
          type: object
          x-doc-examples:
            - apiVersion: deckhouse.io/v1alpha2
              kind: ModulePullOverride
              metadata:
                name: my-module
              spec:
                imageTag: v1.2.3
                scanInterval: 15s
                rollback: false
      served: true
      storage: true
      subresources:
        status: {}
  preserveUnknownFields: false
