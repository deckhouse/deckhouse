---
apiVersion: v1
kind: Secret
metadata:
  name: deckhouse-discovery
  namespace: d8-system
type: Opaque
data:
  bundle: {{ b64enc .Values.deckhouse.bundle }}
  releaseChannel: {{ .Values.deckhouse.releaseChannel | default "Unknown" | b64enc }}
{{- if .Values.deckhouse.update }}
  updateSettings.json: {{ .Values.deckhouse.update | toJson | b64enc }}
{{- end }}
  clusterIsBootstrapped: {{ .Values.global.clusterIsBootstrapped | quote | b64enc }}
  imagesRegistry: {{ b64enc .Values.global.modulesImages.registry.base }}
