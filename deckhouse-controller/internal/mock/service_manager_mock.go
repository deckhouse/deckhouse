// Code generated by http://github.com/gojuno/minimock (v3.4.7). DO NOT EDIT.

package mock

//go:generate minimock -i github.com/deckhouse/deckhouse/deckhouse-controller/internal/registry/service.ServiceManagerInterface -o service_manager_mock.go -n ServiceManagerMock -p mock

import (
	"sync"
	mm_atomic "sync/atomic"
	mm_time "time"

	"github.com/gojuno/minimock/v3"
)

// ServiceManagerMock implements mm_service.ServiceManagerInterface
type ServiceManagerMock[T any] struct {
	t          minimock.Tester
	finishOnce sync.Once

	funcService          func(registryURL string, dockerCFG string, ca string, userAgent string, scheme string) (tp1 *T, err error)
	funcServiceOrigin    string
	inspectFuncService   func(registryURL string, dockerCFG string, ca string, userAgent string, scheme string)
	afterServiceCounter  uint64
	beforeServiceCounter uint64
	ServiceMock          mServiceManagerMockService[T]
}

// NewServiceManagerMock returns a mock for mm_service.ServiceManagerInterface
func NewServiceManagerMock[T any](t minimock.Tester) *ServiceManagerMock[T] {
	m := &ServiceManagerMock[T]{t: t}

	if controller, ok := t.(minimock.MockController); ok {
		controller.RegisterMocker(m)
	}

	m.ServiceMock = mServiceManagerMockService[T]{mock: m}
	m.ServiceMock.callArgs = []*ServiceManagerMockServiceParams[T]{}

	t.Cleanup(m.MinimockFinish)

	return m
}

type mServiceManagerMockService[T any] struct {
	optional           bool
	mock               *ServiceManagerMock[T]
	defaultExpectation *ServiceManagerMockServiceExpectation[T]
	expectations       []*ServiceManagerMockServiceExpectation[T]

	callArgs []*ServiceManagerMockServiceParams[T]
	mutex    sync.RWMutex

	expectedInvocations       uint64
	expectedInvocationsOrigin string
}

// ServiceManagerMockServiceExpectation specifies expectation struct of the ServiceManagerInterface.Service
type ServiceManagerMockServiceExpectation[T any] struct {
	mock               *ServiceManagerMock[T]
	params             *ServiceManagerMockServiceParams[T]
	paramPtrs          *ServiceManagerMockServiceParamPtrs[T]
	expectationOrigins ServiceManagerMockServiceExpectationOrigins
	results            *ServiceManagerMockServiceResults[T]
	returnOrigin       string
	Counter            uint64
}

// ServiceManagerMockServiceParams contains parameters of the ServiceManagerInterface.Service
type ServiceManagerMockServiceParams[T any] struct {
	registryURL string
	dockerCFG   string
	ca          string
	userAgent   string
	scheme      string
}

// ServiceManagerMockServiceParamPtrs contains pointers to parameters of the ServiceManagerInterface.Service
type ServiceManagerMockServiceParamPtrs[T any] struct {
	registryURL *string
	dockerCFG   *string
	ca          *string
	userAgent   *string
	scheme      *string
}

// ServiceManagerMockServiceResults contains results of the ServiceManagerInterface.Service
type ServiceManagerMockServiceResults[T any] struct {
	tp1 *T
	err error
}

// ServiceManagerMockServiceOrigins contains origins of expectations of the ServiceManagerInterface.Service
type ServiceManagerMockServiceExpectationOrigins struct {
	origin            string
	originRegistryURL string
	originDockerCFG   string
	originCa          string
	originUserAgent   string
	originScheme      string
}

// Marks this method to be optional. The default behavior of any method with Return() is '1 or more', meaning
// the test will fail minimock's automatic final call check if the mocked method was not called at least once.
// Optional() makes method check to work in '0 or more' mode.
// It is NOT RECOMMENDED to use this option unless you really need it, as default behaviour helps to
// catch the problems when the expected method call is totally skipped during test run.
func (mmService *mServiceManagerMockService[T]) Optional() *mServiceManagerMockService[T] {
	mmService.optional = true
	return mmService
}

// Expect sets up expected params for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) Expect(registryURL string, dockerCFG string, ca string, userAgent string, scheme string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.paramPtrs != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by ExpectParams functions")
	}

	mmService.defaultExpectation.params = &ServiceManagerMockServiceParams[T]{registryURL, dockerCFG, ca, userAgent, scheme}
	mmService.defaultExpectation.expectationOrigins.origin = minimock.CallerInfo(1)
	for _, e := range mmService.expectations {
		if minimock.Equal(e.params, mmService.defaultExpectation.params) {
			mmService.mock.t.Fatalf("Expectation set by When has same params: %#v", *mmService.defaultExpectation.params)
		}
	}

	return mmService
}

// ExpectRegistryURLParam1 sets up expected param registryURL for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) ExpectRegistryURLParam1(registryURL string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.params != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Expect")
	}

	if mmService.defaultExpectation.paramPtrs == nil {
		mmService.defaultExpectation.paramPtrs = &ServiceManagerMockServiceParamPtrs[T]{}
	}
	mmService.defaultExpectation.paramPtrs.registryURL = &registryURL
	mmService.defaultExpectation.expectationOrigins.originRegistryURL = minimock.CallerInfo(1)

	return mmService
}

// ExpectDockerCFGParam2 sets up expected param dockerCFG for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) ExpectDockerCFGParam2(dockerCFG string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.params != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Expect")
	}

	if mmService.defaultExpectation.paramPtrs == nil {
		mmService.defaultExpectation.paramPtrs = &ServiceManagerMockServiceParamPtrs[T]{}
	}
	mmService.defaultExpectation.paramPtrs.dockerCFG = &dockerCFG
	mmService.defaultExpectation.expectationOrigins.originDockerCFG = minimock.CallerInfo(1)

	return mmService
}

// ExpectCaParam3 sets up expected param ca for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) ExpectCaParam3(ca string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.params != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Expect")
	}

	if mmService.defaultExpectation.paramPtrs == nil {
		mmService.defaultExpectation.paramPtrs = &ServiceManagerMockServiceParamPtrs[T]{}
	}
	mmService.defaultExpectation.paramPtrs.ca = &ca
	mmService.defaultExpectation.expectationOrigins.originCa = minimock.CallerInfo(1)

	return mmService
}

// ExpectUserAgentParam4 sets up expected param userAgent for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) ExpectUserAgentParam4(userAgent string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.params != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Expect")
	}

	if mmService.defaultExpectation.paramPtrs == nil {
		mmService.defaultExpectation.paramPtrs = &ServiceManagerMockServiceParamPtrs[T]{}
	}
	mmService.defaultExpectation.paramPtrs.userAgent = &userAgent
	mmService.defaultExpectation.expectationOrigins.originUserAgent = minimock.CallerInfo(1)

	return mmService
}

// ExpectSchemeParam5 sets up expected param scheme for ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) ExpectSchemeParam5(scheme string) *mServiceManagerMockService[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{}
	}

	if mmService.defaultExpectation.params != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Expect")
	}

	if mmService.defaultExpectation.paramPtrs == nil {
		mmService.defaultExpectation.paramPtrs = &ServiceManagerMockServiceParamPtrs[T]{}
	}
	mmService.defaultExpectation.paramPtrs.scheme = &scheme
	mmService.defaultExpectation.expectationOrigins.originScheme = minimock.CallerInfo(1)

	return mmService
}

// Inspect accepts an inspector function that has same arguments as the ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) Inspect(f func(registryURL string, dockerCFG string, ca string, userAgent string, scheme string)) *mServiceManagerMockService[T] {
	if mmService.mock.inspectFuncService != nil {
		mmService.mock.t.Fatalf("Inspect function is already set for ServiceManagerMock.Service")
	}

	mmService.mock.inspectFuncService = f

	return mmService
}

// Return sets up results that will be returned by ServiceManagerInterface.Service
func (mmService *mServiceManagerMockService[T]) Return(tp1 *T, err error) *ServiceManagerMock[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	if mmService.defaultExpectation == nil {
		mmService.defaultExpectation = &ServiceManagerMockServiceExpectation[T]{mock: mmService.mock}
	}
	mmService.defaultExpectation.results = &ServiceManagerMockServiceResults[T]{tp1, err}
	mmService.defaultExpectation.returnOrigin = minimock.CallerInfo(1)
	return mmService.mock
}

// Set uses given function f to mock the ServiceManagerInterface.Service method
func (mmService *mServiceManagerMockService[T]) Set(f func(registryURL string, dockerCFG string, ca string, userAgent string, scheme string) (tp1 *T, err error)) *ServiceManagerMock[T] {
	if mmService.defaultExpectation != nil {
		mmService.mock.t.Fatalf("Default expectation is already set for the ServiceManagerInterface.Service method")
	}

	if len(mmService.expectations) > 0 {
		mmService.mock.t.Fatalf("Some expectations are already set for the ServiceManagerInterface.Service method")
	}

	mmService.mock.funcService = f
	mmService.mock.funcServiceOrigin = minimock.CallerInfo(1)
	return mmService.mock
}

// When sets expectation for the ServiceManagerInterface.Service which will trigger the result defined by the following
// Then helper
func (mmService *mServiceManagerMockService[T]) When(registryURL string, dockerCFG string, ca string, userAgent string, scheme string) *ServiceManagerMockServiceExpectation[T] {
	if mmService.mock.funcService != nil {
		mmService.mock.t.Fatalf("ServiceManagerMock.Service mock is already set by Set")
	}

	expectation := &ServiceManagerMockServiceExpectation[T]{
		mock:               mmService.mock,
		params:             &ServiceManagerMockServiceParams[T]{registryURL, dockerCFG, ca, userAgent, scheme},
		expectationOrigins: ServiceManagerMockServiceExpectationOrigins{origin: minimock.CallerInfo(1)},
	}
	mmService.expectations = append(mmService.expectations, expectation)
	return expectation
}

// Then sets up ServiceManagerInterface.Service return parameters for the expectation previously defined by the When method
func (e *ServiceManagerMockServiceExpectation[T]) Then(tp1 *T, err error) *ServiceManagerMock[T] {
	e.results = &ServiceManagerMockServiceResults[T]{tp1, err}
	return e.mock
}

// Times sets number of times ServiceManagerInterface.Service should be invoked
func (mmService *mServiceManagerMockService[T]) Times(n uint64) *mServiceManagerMockService[T] {
	if n == 0 {
		mmService.mock.t.Fatalf("Times of ServiceManagerMock.Service mock can not be zero")
	}
	mm_atomic.StoreUint64(&mmService.expectedInvocations, n)
	mmService.expectedInvocationsOrigin = minimock.CallerInfo(1)
	return mmService
}

func (mmService *mServiceManagerMockService[T]) invocationsDone() bool {
	if len(mmService.expectations) == 0 && mmService.defaultExpectation == nil && mmService.mock.funcService == nil {
		return true
	}

	totalInvocations := mm_atomic.LoadUint64(&mmService.mock.afterServiceCounter)
	expectedInvocations := mm_atomic.LoadUint64(&mmService.expectedInvocations)

	return totalInvocations > 0 && (expectedInvocations == 0 || expectedInvocations == totalInvocations)
}

// Service implements mm_service.ServiceManagerInterface
func (mmService *ServiceManagerMock[T]) Service(registryURL string, dockerCFG string, ca string, userAgent string, scheme string) (tp1 *T, err error) {
	mm_atomic.AddUint64(&mmService.beforeServiceCounter, 1)
	defer mm_atomic.AddUint64(&mmService.afterServiceCounter, 1)

	mmService.t.Helper()

	if mmService.inspectFuncService != nil {
		mmService.inspectFuncService(registryURL, dockerCFG, ca, userAgent, scheme)
	}

	mm_params := ServiceManagerMockServiceParams[T]{registryURL, dockerCFG, ca, userAgent, scheme}

	// Record call args
	mmService.ServiceMock.mutex.Lock()
	mmService.ServiceMock.callArgs = append(mmService.ServiceMock.callArgs, &mm_params)
	mmService.ServiceMock.mutex.Unlock()

	for _, e := range mmService.ServiceMock.expectations {
		if minimock.Equal(*e.params, mm_params) {
			mm_atomic.AddUint64(&e.Counter, 1)
			return e.results.tp1, e.results.err
		}
	}

	if mmService.ServiceMock.defaultExpectation != nil {
		mm_atomic.AddUint64(&mmService.ServiceMock.defaultExpectation.Counter, 1)
		mm_want := mmService.ServiceMock.defaultExpectation.params
		mm_want_ptrs := mmService.ServiceMock.defaultExpectation.paramPtrs

		mm_got := ServiceManagerMockServiceParams[T]{registryURL, dockerCFG, ca, userAgent, scheme}

		if mm_want_ptrs != nil {

			if mm_want_ptrs.registryURL != nil && !minimock.Equal(*mm_want_ptrs.registryURL, mm_got.registryURL) {
				mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameter registryURL, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
					mmService.ServiceMock.defaultExpectation.expectationOrigins.originRegistryURL, *mm_want_ptrs.registryURL, mm_got.registryURL, minimock.Diff(*mm_want_ptrs.registryURL, mm_got.registryURL))
			}

			if mm_want_ptrs.dockerCFG != nil && !minimock.Equal(*mm_want_ptrs.dockerCFG, mm_got.dockerCFG) {
				mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameter dockerCFG, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
					mmService.ServiceMock.defaultExpectation.expectationOrigins.originDockerCFG, *mm_want_ptrs.dockerCFG, mm_got.dockerCFG, minimock.Diff(*mm_want_ptrs.dockerCFG, mm_got.dockerCFG))
			}

			if mm_want_ptrs.ca != nil && !minimock.Equal(*mm_want_ptrs.ca, mm_got.ca) {
				mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameter ca, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
					mmService.ServiceMock.defaultExpectation.expectationOrigins.originCa, *mm_want_ptrs.ca, mm_got.ca, minimock.Diff(*mm_want_ptrs.ca, mm_got.ca))
			}

			if mm_want_ptrs.userAgent != nil && !minimock.Equal(*mm_want_ptrs.userAgent, mm_got.userAgent) {
				mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameter userAgent, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
					mmService.ServiceMock.defaultExpectation.expectationOrigins.originUserAgent, *mm_want_ptrs.userAgent, mm_got.userAgent, minimock.Diff(*mm_want_ptrs.userAgent, mm_got.userAgent))
			}

			if mm_want_ptrs.scheme != nil && !minimock.Equal(*mm_want_ptrs.scheme, mm_got.scheme) {
				mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameter scheme, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
					mmService.ServiceMock.defaultExpectation.expectationOrigins.originScheme, *mm_want_ptrs.scheme, mm_got.scheme, minimock.Diff(*mm_want_ptrs.scheme, mm_got.scheme))
			}

		} else if mm_want != nil && !minimock.Equal(*mm_want, mm_got) {
			mmService.t.Errorf("ServiceManagerMock.Service got unexpected parameters, expected at\n%s:\nwant: %#v\n got: %#v%s\n",
				mmService.ServiceMock.defaultExpectation.expectationOrigins.origin, *mm_want, mm_got, minimock.Diff(*mm_want, mm_got))
		}

		mm_results := mmService.ServiceMock.defaultExpectation.results
		if mm_results == nil {
			mmService.t.Fatal("No results are set for the ServiceManagerMock.Service")
		}
		return (*mm_results).tp1, (*mm_results).err
	}
	if mmService.funcService != nil {
		return mmService.funcService(registryURL, dockerCFG, ca, userAgent, scheme)
	}
	mmService.t.Fatalf("Unexpected call to ServiceManagerMock.Service. %v %v %v %v %v", registryURL, dockerCFG, ca, userAgent, scheme)
	return
}

// ServiceAfterCounter returns a count of finished ServiceManagerMock.Service invocations
func (mmService *ServiceManagerMock[T]) ServiceAfterCounter() uint64 {
	return mm_atomic.LoadUint64(&mmService.afterServiceCounter)
}

// ServiceBeforeCounter returns a count of ServiceManagerMock.Service invocations
func (mmService *ServiceManagerMock[T]) ServiceBeforeCounter() uint64 {
	return mm_atomic.LoadUint64(&mmService.beforeServiceCounter)
}

// Calls returns a list of arguments used in each call to ServiceManagerMock.Service.
// The list is in the same order as the calls were made (i.e. recent calls have a higher index)
func (mmService *mServiceManagerMockService[T]) Calls() []*ServiceManagerMockServiceParams[T] {
	mmService.mutex.RLock()

	argCopy := make([]*ServiceManagerMockServiceParams[T], len(mmService.callArgs))
	copy(argCopy, mmService.callArgs)

	mmService.mutex.RUnlock()

	return argCopy
}

// MinimockServiceDone returns true if the count of the Service invocations corresponds
// the number of defined expectations
func (m *ServiceManagerMock[T]) MinimockServiceDone() bool {
	if m.ServiceMock.optional {
		// Optional methods provide '0 or more' call count restriction.
		return true
	}

	for _, e := range m.ServiceMock.expectations {
		if mm_atomic.LoadUint64(&e.Counter) < 1 {
			return false
		}
	}

	return m.ServiceMock.invocationsDone()
}

// MinimockServiceInspect logs each unmet expectation
func (m *ServiceManagerMock[T]) MinimockServiceInspect() {
	for _, e := range m.ServiceMock.expectations {
		if mm_atomic.LoadUint64(&e.Counter) < 1 {
			m.t.Errorf("Expected call to ServiceManagerMock.Service at\n%s with params: %#v", e.expectationOrigins.origin, *e.params)
		}
	}

	afterServiceCounter := mm_atomic.LoadUint64(&m.afterServiceCounter)
	// if default expectation was set then invocations count should be greater than zero
	if m.ServiceMock.defaultExpectation != nil && afterServiceCounter < 1 {
		if m.ServiceMock.defaultExpectation.params == nil {
			m.t.Errorf("Expected call to ServiceManagerMock.Service at\n%s", m.ServiceMock.defaultExpectation.returnOrigin)
		} else {
			m.t.Errorf("Expected call to ServiceManagerMock.Service at\n%s with params: %#v", m.ServiceMock.defaultExpectation.expectationOrigins.origin, *m.ServiceMock.defaultExpectation.params)
		}
	}
	// if func was set then invocations count should be greater than zero
	if m.funcService != nil && afterServiceCounter < 1 {
		m.t.Errorf("Expected call to ServiceManagerMock.Service at\n%s", m.funcServiceOrigin)
	}

	if !m.ServiceMock.invocationsDone() && afterServiceCounter > 0 {
		m.t.Errorf("Expected %d calls to ServiceManagerMock.Service at\n%s but found %d calls",
			mm_atomic.LoadUint64(&m.ServiceMock.expectedInvocations), m.ServiceMock.expectedInvocationsOrigin, afterServiceCounter)
	}
}

// MinimockFinish checks that all mocked methods have been called the expected number of times
func (m *ServiceManagerMock[T]) MinimockFinish() {
	m.finishOnce.Do(func() {
		if !m.minimockDone() {
			m.MinimockServiceInspect()
		}
	})
}

// MinimockWait waits for all mocked methods to be called the expected number of times
func (m *ServiceManagerMock[T]) MinimockWait(timeout mm_time.Duration) {
	timeoutCh := mm_time.After(timeout)
	for {
		if m.minimockDone() {
			return
		}
		select {
		case <-timeoutCh:
			m.MinimockFinish()
			return
		case <-mm_time.After(10 * mm_time.Millisecond):
		}
	}
}

func (m *ServiceManagerMock[T]) minimockDone() bool {
	done := true
	return done &&
		m.MinimockServiceDone()
}
