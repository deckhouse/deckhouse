{{- $providerVersion := include "get_oss_version_by_id" (list "terraform-provider-vsphere" $ )  -}}
---
image: {{ .ModuleName }}/{{ .ImageName }}
fromImage: '{{- include "infrastructure_manager_base_image" (dict "TF" .TF "providerName" "vsphere") }}'
git:
- add: /{{ .ModulePath }}modules/030-cloud-provider-vsphere/candi
  to: /deckhouse/candi/cloud-providers/vsphere
import:
- image: cloud-provider-vsphere/terraform-manager
  add: /terraform-manager/terraform-provider-vsphere
  to: /plugins/{{ include "infrastructure_manager_plugin_dir" (dict "TF" .TF "providerName" "vsphere") }}/{{ .TF.vsphere.namespace }}/{{ .TF.vsphere.type }}/{{ $providerVersion }}/linux_amd64/terraform-provider-vsphere
  before: setup

{{ include "image_spec_for_infrastructure_manager" . }}
