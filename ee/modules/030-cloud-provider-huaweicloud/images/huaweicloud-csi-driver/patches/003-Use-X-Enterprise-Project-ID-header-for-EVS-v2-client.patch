From 6e2e436360dc05af944e2c9d8dea4a86da8a31d8 Mon Sep 17 00:00:00 2001
From: Vladislav Denisov <vlad144denisov@gmail.com>
Date: Mon, 24 Nov 2025 11:01:09 +0300
Subject: [PATCH] Use X-Enterprise-Project-ID header for EVS v2 client

---
 pkg/evs/services/volumes.go | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/pkg/evs/services/volumes.go b/pkg/evs/services/volumes.go
index c653f77..b29265f 100644
--- a/pkg/evs/services/volumes.go
+++ b/pkg/evs/services/volumes.go
@@ -205,6 +205,12 @@ func getEvsV2Client(c *config.CloudCredentials) (*golangsdk.ServiceClient, error
 		logMsg := fmt.Sprintf("Failed create EVS V2 client: %s", err)
 		return nil, status.Error(codes.Internal, logMsg)
 	}
+	if c.Global.EnterpriseProjectID != "" {
+		if client.MoreHeaders == nil {
+			client.MoreHeaders = map[string]string{}
+		}
+		client.MoreHeaders["X-Enterprise-Project-ID"] = c.Global.EnterpriseProjectID
+	}
 	return client, nil
 }
 
-- 
2.48.1

