From eb32d9c1512413c81066bd279382bb0269af3969 Mon Sep 17 00:00:00 2001
From: Vladislav Denisov <vlad144denisov@gmail.com>
Date: Mon, 24 Nov 2025 10:38:05 +0300
Subject: [PATCH] Fix: add EnterpriseProjectID support to EVS v2 (Cinder) and
 vendors

---
 pkg/evs/services/volumes.go                     | 17 +++++++++--------
 .../blockstorage/v2/volumes/requests.go         |  3 ++-
 2 files changed, 11 insertions(+), 9 deletions(-)

diff --git a/pkg/evs/services/volumes.go b/pkg/evs/services/volumes.go
index c653f77..c8f798b 100644
--- a/pkg/evs/services/volumes.go
+++ b/pkg/evs/services/volumes.go
@@ -43,14 +43,15 @@ func CreateCinderCompleted(c *config.CloudCredentials, opts *cloudvolumes.Create
 	}
 
 	createOpts := cinder.CreateOpts{
-		Name:             opts.Volume.Name,
-		Size:             opts.Volume.Size,
-		VolumeType:       opts.Volume.VolumeType,
-		AvailabilityZone: opts.Volume.AvailabilityZone,
-		SnapshotID:       opts.Volume.SnapshotID,
-		Metadata:         opts.Volume.Metadata,
-		IOPS:             opts.Volume.IOPS,
-		Throughput:       opts.Volume.Throughput,
+		Name:                opts.Volume.Name,
+		Size:                opts.Volume.Size,
+		VolumeType:          opts.Volume.VolumeType,
+		AvailabilityZone:    opts.Volume.AvailabilityZone,
+		SnapshotID:          opts.Volume.SnapshotID,
+		Metadata:            opts.Volume.Metadata,
+		IOPS:                opts.Volume.IOPS,
+		Throughput:          opts.Volume.Throughput,
+		EnterpriseProjectID: opts.Volume.EnterpriseProjectID,
 	}
 
 	cinderVol, err := cinder.Create(client, createOpts).Extract()
diff --git a/vendor/github.com/chnsz/golangsdk/openstack/blockstorage/v2/volumes/requests.go b/vendor/github.com/chnsz/golangsdk/openstack/blockstorage/v2/volumes/requests.go
index c765801..e4c9ee5 100644
--- a/vendor/github.com/chnsz/golangsdk/openstack/blockstorage/v2/volumes/requests.go
+++ b/vendor/github.com/chnsz/golangsdk/openstack/blockstorage/v2/volumes/requests.go
@@ -43,7 +43,8 @@ type CreateOpts struct {
 	// The iops of evs volume. Only required when volume_type is `GPSSD2` or `ESSD2`
 	IOPS int `json:"iops,omitempty"`
 	// The throughput of evs volume. Only required when volume_type is `GPSSD2`
-	Throughput int `json:"throughput,omitempty"`
+	Throughput          int    `json:"throughput,omitempty"`
+	EnterpriseProjectID string `json:"enterprise_project_id,omitempty"`
 }
 
 // ToVolumeCreateMap assembles a request body based on the contents of a
-- 
2.48.1

