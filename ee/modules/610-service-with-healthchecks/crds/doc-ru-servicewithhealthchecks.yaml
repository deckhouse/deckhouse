spec:
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: Спецификация ServiceWithHealthchecks аналогична спецификации Service за исключением раздела healthcheck
            properties:
              healthcheck:
                properties:
                  initialDelaySeconds:
                    description: |-
                      Время в секундах после страта пода, по истечении которого запускаются пробы.
                  periodSeconds:
                    description: |-
                      Период в секундах для повторных запусков проб.
                  probes:
                    items:
                      properties:
                        failureThreshold:
                          description: |-
                            Минимальное непрерывное количество неудачных проб, после которого результат проб признается проваленым.
                        httpHandler:
                          properties:
                            host:
                              description: |-
                                Имя хоста для подключения, по умолчанию - IP-адрес пода. Возможно, вы захотите задать «Host» в httpHeaders вместо этого.
                            httpHeaders:
                              description: Пользовательские заголовки для установки в запросе. HTTP допускает повторные заголовки.
                              items:
                                properties:
                                  name:
                                    description: |-
                                      Имя поля заголовка. При выводе оно будет канонизировано, поэтому имена, отличающиеся по регистру,
                                      будут восприниматься как один и тот же заголовок.
                                  value:
                                    description: Значение поля для заголовка
                                required:
                                - name
                                - value
                                type: object
                              type: array
                            method:
                              description: Метод, который будет использоваться для запроса. По умолчанию используется GET.
                            path:
                              description: Путь для доступа на сервере HTTP.
                            port:
                              anyOf:
                              - type: integer
                              - type: string
                              description: |-
                                Имя или номер порта для доступа.
                                Номер должен находиться в диапазоне от 1 до 65535.
                                Имя должно быть IANA_SVC_NAME.
                              x-kubernetes-int-or-string: true
                            scheme:
                              description: |-
                                Схема, используемая для подключения к хосту.
                                По умолчанию - HTTP.
                          required:
                          - port
                          type: object
                        mode:
                          type: string
                        successThreshold:
                          description: |-
                            Минимальное непрерывное количество удачных проб, после которого результат проб признается успешным.
                        tcpHandler:
                          properties:
                            port:
                              description: |-
                                Имя или номер порта для доступа.
                                Номер должен находиться в диапазоне от 1 до 65535.
                                Имя должно быть IANA_SVC_NAME.
                          required:
                          - port
                          type: object
                        timeoutSeconds:
                          description: |-
                            Количество секунд, по истечении которых проверка завершает работу.
                      type: object
                    type: array
                type: object
