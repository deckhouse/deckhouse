spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: ServiceWithHealthchecks это схема для servicewithhealthchecks API  
          spec:
            properties:
              allocateLoadBalancerNodePorts:
                description: |-
                  allocateLoadBalancerNodePorts определяет, будут ли автоматически выделяться порты узла
                  выделяться для сервисов с типом LoadBalancer.  По умолчанию это значение равно «true». Это
                  может быть установлено в «false», если балансировщик нагрузки кластера не полагается на
                  NodePorts.  Если вызывающая сторона запрашивает конкретные NodePorts (указывая значение
                  значение), эти запросы будут выполнены, независимо от этого поля.
                  Это поле может быть установлено только для сервисов с типом LoadBalancer и будет
                  будет очищено, если тип будет изменен на любой другой.
                healthcheck:
                  properties:
                    initialDelaySeconds:
                      description: |-
                        Время в секундах после страта пода, по истечении которого запускаются пробы.
                    periodSeconds:
                      description: |-
                        Период в секундах для повторных запусков проб.
                    probes:
                      items:
                        properties:
                          failureThreshold:
                            description: |-
                              Минимальное непрерывное количество неудачных проб, после которого результат проб признается проваленым.
                              Значение по умолчанию 3. Минимальное значение 1.
                          timeoutSeconds:
                            description: |-
                              Количество секунд, по истечении которых проверка завершает работу.
                              Значение по умолчанию 1. Минимальное значение 1.
                          successThreshold:
                            description: |-
                              Минимальное непрерывное количество удачных проб, после которого результат проб признается успешным.
                              Значение по умолчанию 1. Минимальное значение 1.
                          mode:
                            description: |-
                              Режим для пробы. Может прнимать одно из перечисленных значений: HTTP, TCP, PostgreSQL
                          http:
                            properties:
                              host:
                                description: |-
                                  Имя хоста для подключения, по умолчанию - IP-адрес пода.
                                  Возможно, вы захотите задать «Host» в httpHeaders вместо этого.
                              httpHeaders:
                                description: Пользовательские заголовки для установки в запросе. HTTP допускает повторные заголовки.
                                items:
                                  properties:
                                    name:
                                      description: |-
                                        Имя поля заголовка. При выводе оно будет канонизировано, поэтому имена, отличающиеся по регистру,
                                        будут восприниматься как один и тот же заголовок.
                                    value:
                                      description: Значение поля для заголовка
                                  type: object
                                type: array
                              method:
                                description: Метод, который будет использоваться для запроса. По умолчанию используется GET.
                              path:
                                description: Path to access on the HTTP server.
                              scheme:
                                description: |-
                                  Схема, используемая для подключения к хосту.
                                  По умолчанию - HTTP.
                              targetPort:
                                description: |-
                                  Имя или номер порта для доступа.
                                  Номер должен находиться в диапазоне от 1 до 65535.
                                  Имя должно быть IANA_SVC_NAME.
                            type: object
                          postgreSQL:
                            properties:
                              authSecretName:
                                description: |-
                                  Имя secret, расположенного в том же пространстве имен, что и этот ресурс.
                                  Секрет может содержать следующие поля аутентификации:
                                  tlsMode, clientCert, clientKey, caCert, password, user
                              dbName:
                                description: Необязательное имя БД.
                              query:
                                description: |-
                                  Запрос к PostgreSQL для тестирования.
                                  Результат должен принимать одно из значений TRUE, 't', 'true', 'y', 'yes','1'
                                  чтобы быть признаным успешным. По умолчанию: select 1
                              targetPort:
                                description: |-
                                  Имя или номер порта для доступа.
                                  Номер должен находиться в диапазоне от 1 до 65535.
                                  Имя должно быть IANA_SVC_NAME.
                            required:
                              - targetPort
                            type: object
                          tcp:
                            properties:
                              targetPort:
                                description: |-
                                  Имя или номер порта для доступа.
                                  Номер должен находиться в диапазоне от 1 до 65535.
                                  Имя должно быть IANA_SVC_NAME.
