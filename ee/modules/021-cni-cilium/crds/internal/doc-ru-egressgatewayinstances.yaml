spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: Автоматический создаваемый ресурс для отслеживания состояния EgressGateway в режиме VirtualIP.
          properties:
            spec:
              description: Описывает желаемое состояние объекта EgressGatewayInstance.
              properties:
                nodeName:
                  description: Имя активного узла.
                sourceIP:
                  properties:
                    mode:
                      description: |-
                        Метод определения исходящего IP-адреса, который будет назначен на исходящие запросы через данный шлюз. Возможные варианты:
                        * `PrimaryIPFromEgressGatewayNodeInterface` — в качестве IP-адреса будет использоваться primary IP-адрес на "публичном" сетевом интерфейсе узла. Особенности:
                          * При выходе из строя активного узла и назначении нового, IP-адрес отправителя в сетевых пакетах поменяется.
                          * Предварительно необходимо настроить сетевую подсистему на всех egress-узлах:
                            * у "публичных" интерфейсов должно быть одинаковое имя (например, eth1),
                            * должны быть настроены все необходимые маршруты для доступа на все внешние публичные сервисы.
                        * `VirtualIPAddress` — явное указание исходящего IP-адреса. Особенности:
                          * При выходе из строя активного узла, IP-адрес отправителя в сетевых пакетах не поменяется.
                          * Предварительно необходимо настроить сетевую подсистему на всех egress-узлах:
                            * должны быть настроены все необходимые маршруты для доступа на все внешние публичные сервисы,
                            * "публичный" интерфейс должен быть подготовлен к автоматической настройке "виртуального" IP в качестве secondary IP-адреса (при назначении egress-узла в качестве активного, адрес не будет отображаться в списке IP на "публичном" интерфейсе, но при этом, узел будет эмулировать его наличие с помощью ARP-ответов).
                    primaryIPFromEgressGatewayNodeInterface:
                      properties:
                        interfaceName:
                        description: |-
                          Имя "публичного" сетевого интерфейса.
                    virtualIPAddress:
                      properties:
                        ip:
                          description: |-
                            "Виртуальный" IP-адрес, который будет назначен на исходящие запросы через egress-шлюз.
                        routingTableName:
                          description: |-
                            Имя таблицы маршрутизации
            status:
              description: Статус ресурса EgressGatewayInstance.
