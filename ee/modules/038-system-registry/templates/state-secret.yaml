---
apiVersion: v1
kind: Secret
metadata:
  name: registry-deckhouse-state
  namespace: d8-system
  annotations:
    version: "1"
  labels:
    app.kubernetes.io/managed-by: system-registry
    heritage: deckhouse
    module: system-registry
    type: system-registry-state
type: system-registry/state
data:
  {{- with .Values.systemRegistry.internal.state }}
  state: {{ . | toYaml | b64enc }}
  {{- if .version }}
  version: {{ .version | b64enc  }}
  {{- end }}
  {{- end }}
