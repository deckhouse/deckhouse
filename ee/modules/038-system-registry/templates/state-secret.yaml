---
apiVersion: v1
kind: Secret
metadata:
  name: registry-state
  namespace: d8-system
  annotations:
    version: "1"
  {{- include "helm_lib_module_labels" (list $ (dict "app" "registry" "type" "registry-state" )) | nindent 2 }}
type: registry/state
data:
  {{- with .Values.systemRegistry.internal.state }}
  state: {{ . | toYaml | b64enc }}
  staticpod_version: {{ .staticpod_version | b64enc  }}
  {{- if .messages }}
  messages: {{ .messages | toYaml | b64enc }}
  {{- end }}
  {{- end }}
