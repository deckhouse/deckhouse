x-extend:
  schema: config-values.yaml
type: object
properties:
  internal:
    type: object
    default: {}
    properties:
      customCertificateData:
        type: object
        properties:
          tls.crt:
            type: string
            x-examples:
              - plainstring
          tls.key:
            type: string
            x-examples:
              - plainstring
          ca.crt:
            type: string
            x-examples:
              - plainstring
      pki:
        type: object
        default: {}
        properties:
          ca: &pki_cert_property
            type: object
            properties:
              cert:
                type: string
              key:
                type: string
          token:
            <<: *pki_cert_property
          proxy:
            <<: *pki_cert_property
          nodes:
            type: array
            items:
              type: object
              properties:
                auth:
                  <<: *pki_cert_property
                distribution:
                  <<: *pki_cert_property
      state:
        type: object
        default: {}
        properties:
          staticpod_version:
            type: string
            default: "unknown"
          bashible_version:
            type: string
            default: "unknown"
          nodes:
            type: object
            additionalProperties: true
            x-kubernetes-preserve-unknown-fields: true
          config:
            type: object
            additionalProperties: true
            x-kubernetes-preserve-unknown-fields: true
          messages:
            type: array
            items:
              type: string
          nonexistent:
            type: boolean
            default: false
          nonexistent_value:
            type: string
      bashible:
        type: object
        default: {}
        properties:
          proxyEndpoints:
            type: array
            default: []
            items:
              type: string
              pattern: '^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}:[1-9][0-9]{0,4}$'
            x-examples:
              - ["10.0.0.2:5001", "10.0.0.3:5001", "10.0.0.4:5001"]
          hosts: &hosts
            type: array
            default: []
            x-example:
              - host: registry.d8-system.svc
                mirrors:
                  - host: 127.0.0.1:5001
                    username: ...
                    password: ...
                    ca: ...
                    schema: ...
            items:
              type: object
              required:
                - host
              properties:
                host:
                  type: string
                mirrors:
                  type: array
                  default: []
                  items:
                    type: object
                    required:
                      - host
                    properties:
                      host:
                        type: string
                      username:
                        type: string
                      password:
                        type: string
                      ca:
                        type: string
                      schema:
                        type: string
                        default: https
          prepullHosts: *hosts
