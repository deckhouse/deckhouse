/*
Copyright 2025 Flant JSC
Licensed under the Deckhouse Platform Enterprise Edition (EE) license. See https://github.com/deckhouse/deckhouse/blob/main/ee/LICENSE
*/

package helpers

import (
	"github.com/flant/addon-operator/pkg/module_manager/go_hook"
)

const (
	// IngressClientCAGlobalValuesPath is a constant path to the certificate for the Kube RBAC Proxy CA
	// This value is always expected to exist as it is generated by "global-hooks/generate_kube_rbac_proxy_ca.go"
	IngressClientCAGlobalValuesPath = "global.internal.modules.kubeRBACProxyCA.cert"
)

func GetIngressClientCAFromGlobalValues(input *go_hook.HookInput) (string, bool) {
	certValue, exists := input.Values.GetOk(IngressClientCAGlobalValuesPath)
	if !exists {
		return "", false
	}
	return certValue.String(), true
}
