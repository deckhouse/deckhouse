В данном руководстве представлены примеры шагов по установке Deckhouse Virtualization Platform. Руководство описывает минимальную конфигурацию платформы, которая включает следующие компоненты:

- **master-узел** — управляющий узел кластера, на котором запускаются системные компоненты Deckhouse и Kubernetes control plane. Master-узел отвечает за управление кластером, оркестрацию подов и координацию работы всех узлов.
- **worker-узел** — рабочий узел кластера, предназначенный для запуска рабочих нагрузок и виртуальных машин. На worker-узлах выполняются пользовательские приложения и виртуальные машины, созданные в платформе виртуализации.
- **NFS-сервер** — внешний сервер сетевого файлового хранилища, используемый для хранения дисков виртуальных машин и данных компонентов кластера (метрики, логи и т.д.). NFS-сервер обеспечивает централизованное хранилище, доступное со всех узлов кластера.

Такая конфигурация подходит для тестирования платформы и небольших рабочих нагрузок. Если вам нужна другая конфигурация (например, несколько master-узлов для высокой доступности, дополнительные worker-узлы или другое хранилище), ознакомьтесь с документацией по [установке платформы](../../documentation/admin/install/steps/prepare.html).

![Архитектура Deckhouse Virtualization Platform для быстрого старта](/images/virtualization-platform/dvp-architecture-gs.ru.png)

## Что необходимо для установки

Для установки Deckhouse Virtualization Platform необходимо иметь:

1. Персональный компьютер: компьютер, с которого будет производиться установка. Он нужен только для запуска инсталлятора и не будет частью кластера.
1. Физический сервер или виртуальная машина для master-узла.
1. Физический сервер или виртуальная машина для worker-узла.
1. Физический сервер или виртуальная машина для сервера NFS.

{% alert level="warning" %}
Убедитесь, что сервер NFS соответствует следующим требованиям:

- достаточный объём дискового пространства под диски виртуальных машин;
- сетевой доступ по протоколу NFS (рекомендуется NFSv4.1) с master- и worker-узлов;
- экспорт каталога для DVP с опцией `no_root_squash`.
{% endalert %}

## Требования к программному и аппаратному обеспечению

Требования к аппаратному обеспечению для Deckhouse Virtualization Platform совпадают с требованиями, предъявляемыми к [Deckhouse Kubernetes Platform](/products/kubernetes-platform/guides/production.html#требования-к-ресурсам), с дополнительным требованием поддержки виртуализации CPU на хостах, где будут запускаться виртуальные машины.

### Дополнительные требования для поддержки виртуализации

На всех узлах кластера, где планируется запуск виртуальных машин, необходимо обеспечить поддержку аппаратной виртуализации:

- Процессор: поддержка инструкций Intel-VT (VMX) или AMD-V (SVM);
- BIOS/UEFI: включена поддержка аппаратной виртуализации в настройках BIOS/UEFI.

{% alert level="warning" %}
Обеспечение стабильной работы механизмов живой миграции требует использования идентичной версии ядра Linux на всех узлах кластера.

Это связано с тем, что различия в версиях ядра могут привести к несовместимости интерфейсов, системных вызовов и особенностей работы с ресурсами, что может нарушить процесс миграции виртуальных машин.
{% endalert %}

## Поддерживаемые гостевые ОС

Deckhouse Virtualization Platform поддерживает операционные системы, работающие на архитектурах `x86` и `x86-64`, в качестве гостевых ОС. Для корректной работы в режиме паравиртуализации необходимо установить драйверы `VirtIO`, обеспечивающие эффективное взаимодействие между виртуальной машиной и гипервизором.

Успешный запуск операционной системы определяется следующими критериями:

- корректная установка и загрузка ОС;
- бесперебойная работа основных компонентов, таких как сеть и хранилище;
- отсутствие сбоев или ошибок в процессе работы.

Для операционных систем семейства Linux рекомендуется использовать образы гостевых ОС с поддержкой `cloud-init`, что позволяет выполнять инициализацию виртуальных машин после их создания.

Для операционных систем семейства Windows платформа поддерживает инициализацию с помощью [autounattend](https://learn.microsoft.com/ru-ru/windows-hardware/manufacture/desktop/windows-setup-automation-overview) установки.
