{% assign revision=include.revision %}

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **Deckhouse Kubernetes Platform** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker-–æ–±—Ä–∞–∑, –≤ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã{%- if page.platform_type != 'existing' %} –∏ SSH-–∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ **master-—É–∑–µ–ª** (–¥–∞–ª–µ–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SSH-–∫–ª—é—á `~/.ssh/id_rsa`){% endif %}.
{% if page.platform_code == 'bm-private' %}
–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ **–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ** –≤ container image registry, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —ç—Ç–∞–ø–µ.
{%- endif %}

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –Ω–∞ **–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ**.

{%- if revision == 'ee' %}

<a id='tab_installer_linux_{{ revision }}' href="javascript:void(0)" class="tabs__btn tabs__btn_installer_{{ revision }} active"
   onclick="openTabAndSaveStatus(event, 'tabs__btn_installer_{{ revision }}', 'tabs__content_installer_{{ revision }}', 'block_installer_linux_{{ revision }}');" >
  Linux / macOS
</a>
<a id='tab_installer_windows_{{ revision }}' href="javascript:void(0)" class="tabs__btn tabs__btn_installer_{{ revision }}"
   onclick="openTabAndSaveStatus(event, 'tabs__btn_installer_{{ revision }}', 'tabs__content_installer_{{ revision }}', 'block_installer_windows_{{ revision }}');" >
  Windows
</a>

<div id='block_installer_linux_{{ revision }}' class="tabs__content tabs__content_installer_{{ revision }} active" markdown="1">
<!-- Linux or macOS install, EE -->
{% snippetcut selector="docker-run" %}
```shell
 echo <LICENSE_TOKEN> | docker login -u license-token --password-stdin registry.deckhouse.ru
docker run --pull=always {% if page.platform_code == "kind" %} --network host {% endif %}-it -v "$PWD/config.yml:/config.yml"{%- if page.platform_type != 'existing' %} -v "$HOME/.ssh/:/tmp/.ssh/"{% endif %}
{%- if page.platform_type == "existing" or page.platform_code == "kind" %} \
  -v "$HOME/.kube/config:/kubeconfig"{% endif %}
{%- if page.platform_type == "cloud" %} \
  -v "$PWD/resources.yml:/resources.yml" -v "$PWD/dhctl-tmp:/tmp/dhctl"{% endif %} registry.deckhouse.ru/deckhouse/ee/install:stable bash
```
{% endsnippetcut %}
</div>
<div id='block_installer_windows_{{ revision }}' class="tabs__content tabs__content_installer_{{ revision }}" markdown="1">
<!-- Windows install, EE -->
–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ **–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ** –≤ container image registry, –≤–≤–µ–¥—è –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–π –∫–ª—é—á –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–∞—Ä–æ–ª—è:
{% snippetcut selector="docker-login-windows" %}
```text
docker login -u license-token registry.deckhouse.ru
```
{% endsnippetcut %}

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–æ–º:
{% snippetcut selector="docker-run-windows" %}
```text
docker run --pull=always {% if page.platform_code == "kind" %} --network host {% endif %}-it -v "%cd%\config.yml:/config.yml"
{%- if page.platform_type != 'existing' %} -v "%userprofile%\.ssh\:/tmp/.ssh/"{% endif %}
{%- if page.platform_type == "existing" or page.platform_code == "kind" %} -v "%userprofile%\.kube\config:/kubeconfig"{% endif %}
{%- if page.platform_type == "cloud" %} -v "%cd%\resources.yml:/resources.yml" -v "%cd%\dhctl-tmp:/tmp/dhctl" {% endif %} registry.deckhouse.ru/deckhouse/ee/install:stable bash -c "chmod 400 /tmp/.ssh/id_rsa; bash"
```
{% endsnippetcut %}
</div>
{% else %}

<a id='tab_installer_linux_{{ revision }}' href="javascript:void(0)" class="tabs__btn tabs__btn_installer_{{ revision }} active"
   onclick="openTabAndSaveStatus(event, 'tabs__btn_installer_{{ revision }}', 'tabs__content_installer_{{ revision }}', 'block_installer_linux_{{ revision }}');" >
  Linux / macOS
</a>
<a id='tab_installer_windows_{{ revision }}' href="javascript:void(0)" class="tabs__btn tabs__btn_installer_{{ revision }}"
   onclick="openTabAndSaveStatus(event, 'tabs__btn_installer_{{ revision }}', 'tabs__content_installer_{{ revision }}', 'block_installer_windows_{{ revision }}');" >
  Windows
</a>

<div id='block_installer_linux_{{ revision }}' class="tabs__content tabs__content_installer_{{ revision }} active" markdown="1">
<!-- Linux or macOS install, CE -->
{% snippetcut selector="docker-run-ce" %}
```shell
docker run --pull=always {% if page.platform_code == "kind" %} --network host {% endif %}-it -v "$PWD/config.yml:/config.yml"{%- if page.platform_type != 'existing' %} -v "$HOME/.ssh/:/tmp/.ssh/"{% endif %}
{%- if page.platform_type == "existing" or page.platform_code == "kind" %} \
  -v "$HOME/.kube/config:/kubeconfig"{% endif %}
{%- if page.platform_type == "cloud" %} \
  -v "$PWD/resources.yml:/resources.yml" -v "$PWD/dhctl-tmp:/tmp/dhctl"{% endif %}
{%- if page.platform_code == "bm-private" %} <IMAGES_REPO_URI>/install:stable
{%- else %} registry.deckhouse.ru/deckhouse/ce/install:stable{% endif %} bash
```
{% endsnippetcut %}
</div>
<div id='block_installer_windows_{{ revision }}' class="tabs__content tabs__content_installer_{{ revision }}" markdown="1">
<!-- Windows install, CE -->
{% snippetcut selector="docker-run-windows-ce" %}
```text
docker run --pull=always {% if page.platform_code == "kind" %} --network host {% endif %}-it -v "%cd%\config.yml:/config.yml"
{%- if page.platform_type != 'existing' %} -v "%userprofile%\.ssh\:/tmp/.ssh/"{% endif %}
{%- if page.platform_type == "existing" or page.platform_code == "kind" %} -v "%userprofile%\.kube\config:/kubeconfig" {% endif %}
{%- if page.platform_type == "cloud" %} -v "%cd%\resources.yml:/resources.yml" -v "%cd%\dhctl-tmp:/tmp/dhctl" {% endif %}
{%- if page.platform_code == "bm-private" %} <IMAGES_REPO_URI>/install:stable
{%- else %} registry.deckhouse.ru/deckhouse/ce/install:stable{% endif %} bash -c "chmod 400 /tmp/.ssh/id_rsa; bash"
```
{% endsnippetcut %}
</div>
{% endif %}

{%- if page.platform_type == "existing" or page.platform_code == "kind" %}
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –í —Ñ–∞–π–ª `/kubeconfig` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ kubectl —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Kubernetes API. –í —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.kube/config` –¥–æ–º–∞—à–Ω–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
{% endif %}

–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

{% snippetcut %}
```shell
{%- if page.platform_type == "existing" or page.platform_code == "kind" %}
dhctl bootstrap-phase install-deckhouse --kubeconfig=/kubeconfig --config=/config.yml
{%- elsif page.platform_type == "baremetal" %}
dhctl bootstrap --ssh-user=<username> --ssh-host=<master_ip> --ssh-agent-private-keys=/tmp/.ssh/id_rsa \
  --config=/config.yml \
  --ask-become-pass
{%- elsif page.platform_type == "cloud" %}
dhctl bootstrap --ssh-user={% if page.platform_code == "azure" %}azureuser{%- elsif page.platform_code == "gcp" %}user{%- else %}ubuntu{%- endif %} --ssh-agent-private-keys=/tmp/.ssh/id_rsa --config=/config.yml --resources=/resources.yml
{%- endif %}
```
{% endsnippetcut %}

{%- if page.platform_type == "baremetal" or page.platform_type == "cloud" %}
{%- if page.platform_type == "baremetal" %}
–í –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `--ssh-user` —É–∫–∞–∂–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è SSH-–∫–ª—é—á –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –ï—Å–ª–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ sudo –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø–∞—Ä–æ–ª—å, —Ç–æ —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å `[sudo] Password:`.
{%- else %}
–í –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `--ssh-user` —É–∫–∞–∂–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã.
{%- if page.platform_code == "azure" %} –í —Å–ª—É—á–∞–µ c {{ page.platform_name[page.lang] }}, —ç—Ç–æ `azureuser` (–¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –æ–±—Ä–∞–∑–∞).
{%- elsif page.platform_code == "gcp" %} –í —Å–ª—É—á–∞–µ c {{ page.platform_name[page.lang] }}, —ç—Ç–æ `user` (–¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –æ–±—Ä–∞–∑–∞).
{%- else %} –î–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –æ–±—Ä–∞–∑–∞ —ç—Ç–æ `ubuntu`.
{%- endif %}
{%- endif %}

{% if page.platform_type == "cloud" %}
{% offtopic title="–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—ã–ª–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞..." %}
> –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—ã–ª–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞ (–Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –∫–≤–æ—Ç, –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ –∏ —Ç.–ø.), –≤—ã –º–æ–∂–µ—Ç–µ –µ–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è, –Ω–∏–∫–∞–∫–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –æ–±–ª–∞–∫–µ —Å–æ–∑–¥–∞–Ω—ã –Ω–µ –±—É–¥—É—Ç.
>
> –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∞ –∏ –≤–∞–º –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ –æ–±–ª–∞–∫–µ —Ä–µ—Å—É—Ä—Å—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:
>
> ```shell
> dhctl bootstrap-phase abort --ssh-user={% if page.platform_code == "azure" %}azureuser{%- elsif page.platform_code == "gcp" %}user{%- else %}ubuntu{%- endif %} --ssh-agent-private-keys=/tmp/.ssh/id_rsa --config=/config.yml
> ```
{%- endofftopic %}
{%- endif %}
{%- endif %}

–ü—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –æ—Ç 5 –¥–æ 30 –º–∏–Ω—É—Ç, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
{% if page.platform_type == "baremetal" %}
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```
...
‚îÇ ‚îÇ No more converge tasks found in Deckhouse queue.
‚îÇ ‚îÇ Deckhouse pod is Ready!
‚îÇ ‚îî Waiting for Deckhouse to become Ready (157.34 seconds)
‚îî ‚õµ ~ Bootstrap: Install Deckhouse (158.47 seconds)

‚ùó ~ Some resources require at least one non-master node to be added to the cluster.
‚îå ‚õµ ~ Bootstrap: Clear cache
‚îÇ ‚ùó ~ Next run of "dhctl bootstrap" will create a new Kubernetes cluster.
‚îî ‚õµ ~ Bootstrap: Clear cache (0.00 seconds)
```
{% else  %}
–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä –≤—ã–≤–µ–¥–µ—Ç IP-–∞–¥—Ä–µ—Å **master-—É–∑–ª–∞** (–æ–Ω –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∞–ª–µ–µ). –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
...
‚îå üéà ~ Common: Kubernetes Master Node addresses for SSH
‚îÇ cloud-demo-master-0 | ssh {% if page.platform_code == "azure" %}azureuser{% elsif page.platform_code == "gcp" %}user{% else %}ubuntu{% endif %}@1.2.3.4
‚îî üéà ~ Common: Kubernetes Master Node addresses for SSH (0.00 seconds)
```
{% endif %}

{%- if page.platform_code == "kind" %}

–û—Å—Ç–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `ingress-nginx-controller.yml` —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:
{% snippetcut name="ingress-nginx-controller.yml" selector="ingress-nginx-controller-yml" %}
{% include_file "_includes/getting_started/{{ page.platform_code }}/partials/ingress-nginx-controller.yml.inc" syntax="yaml" %}
{% endsnippetcut %}
<p>–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –µ–≥–æ, –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:</p>
{% snippetcut %}
```shell
kubectl create -f ingress-nginx-controller.yml
```
{% endsnippetcut %}

–ó–∞–ø—É—Å–∫ Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è.

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã Pod'–∞ Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:
{% snippetcut %}
```shell
kubectl -n d8-ingress-nginx get po
```
{% endsnippetcut %}

–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ—Ö–æ–¥–∞ Pod'–∞ Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ —Å—Ç–∞—Ç—É—Å `Ready`.

–í—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ Deckhouse Kubernetes Platform –≤ `kind`!
{%- else %}

–ü–æ—á—Ç–∏ –≤—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Deckhouse Kubernetes Platform!
{%- endif %}

<!-- Troubleshooting in existing cluster //-->
{%- if page.platform_type == "existing" %}
<h2 id="–µ—Å–ª–∏-—á—Ç–æ-—Ç–æ-–ø–æ—à–ª–æ-–Ω–µ-—Ç–∞–∫">–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>

{%  include getting_started/existing/partials/TROUBLESHOOT_RU.liquid %}

{% endif %}
<!--  //-->
