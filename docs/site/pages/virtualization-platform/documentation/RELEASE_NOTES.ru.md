---
title: "История изменений"
permalink: ru/virtualization-platform/documentation/release-notes.html
lang: ru
---

## v1.0.0

### Новые возможности

* [vm] Добавлена защита от подключения cloud-образа (`VirtualImage` \ `ClusterVirtualImage`) в качестве первого диска. Ранее это приводило к невозможности запуска ВМ с ошибкой "No bootable device".
* [vmop] Добавлена операция с типом `Restore` для восстановления ВМ из ранее созданного снимка.

### Исправления

* [vmsnapshot] Теперь при восстановлении виртуальной машины из снимка корректно восстанавливаются все аннотации и лейблы, которые были у ресурсов в момент создания снимка.
* [module] Исправлена проблема с блокировкой очереди, когда параметр `settings.modules.publicClusterDomain` был пустым в глобальном ресурсе `ModuleConfig`.
* [module] Оптимизирована производительность хука во время установки модуля.
* [vmclass] Исправлена валидация core/coreFraction в ресурсе `VirtualMachineClass`.
* [module] При выключенном модуле `SDN` конфигурация дополнительных сетей в ВМ недоступна.

### Безопасность

* Устранено CVE-2025-47907

## v0.25.0

### Важное

В версии v.0.25.0 добавлена поддержка работы модуля `virtualization` с CRI containerd v2.
После обновления CRI с containerd v1 до containerd v2 необходимо пересоздать образы, которые были созданы с использованием версии модуля виртуализации v0.24.0 и ранее.

### Новые возможности

* [vm] Добавлена возможность подключения к виртуальной машине дополнительных сетевых интерфейсов к сетям, предоставляемым модулем `SDN`. Для этого модуль `SDN` должен быть включен в кластере.
* [vmmac] Для дополнительных сетевых интерфейсов добавлено управление MAC-адресами с использованием ресурсов `VirtualMachineMACAddress` и `VirtualMachineMACAddressLease`.
* [vmclass] Добавлена аннотация для установки класса виртуальной машины по умолчанию. Чтобы назначить `VirtualMachineClass` по умолчанию, необходимо добавить на него аннотацию `virtualmachineclass.virtualization.deckhouse.io/is-default-class=true`. Это позволяет создавать ВМ с пустым полем `spec.virtualMachineClassName`, автоматически заполняя его классом по умолчанию.
* [observability] Добавлены новые метрики Prometheus для отслеживания фазы ресурсов, таких как `VirtualMachineSnapshot`, `VirtualDiskSnapshot`, `VirtualImage` и `ClusterVirtualImage`.

### Исправления

* [vm] Исправили проблему: при изменении типа операционной системы машина уходила в циклическую перезагрузку.
* [vm] Исправили зависание виртуальной машины в фазе `Starting` при нехватке квот проекта. Сообщение о нехватке квот будет отображаться в статусе виртуальной машины. Чтобы продолжился запуск машины, необходимо будет увеличить квоты проекта.
* [vi] Для создания виртуального образа на `PersistentVolumeClaim` должно быть использовано хранилище в режиме `RWX` и `Block`, в противном случае будет отображено предупреждение об ошибке.
* [module] Добавили валидацию, проверяющую, что подсети виртуальных машин не пересекаются с системными подсетями (`podSubnetCIDR` и `serviceSubnetCIDR`).

### Прочее

- [vm] Улучшили сборщик мусора (GC) для отработавших операций виртуальной машины:
  - GC запускается каждый день в 00:00;
  - GC будет удалять успешно завершённые операции (`Completed` \ `Failed`), если истёк их TTL (24 часа);
  - GC подчищает все завершённые операции (`Completed` \ `Failed`), оставляя только 10 последних.
