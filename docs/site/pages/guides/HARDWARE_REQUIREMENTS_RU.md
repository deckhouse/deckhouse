---
title: Выбор «железа» для кластера на bare metal
permalink: ru/guides/hardware-requirements.html
description: Требования к «железу» узлов кластера под управлением Deckhouse Kubernetes Platform.
lang: ru
---

Перед развертыванием кластера под управлением Deckhouse Kubernetes Platform необходимо определиться с конфигурацией будущего кластера и выбрать параметры для будущих узлов кластера, такие как количество RAM, CPU и так далее.

## Планирование установки

Прежде чем приступить к развертыванию кластера необходимо провести планирование ресурсов, которые могут потребоваться для его работы. Для этого следует ответить на несколько вопросов:

* Какая нагрузка планируется на кластер?
* Требуется ли кластеру режим повышенной нагрузки?
* Требуется ли кластеру режим высокой доступности?

Из ответов на эти вопросы следует выбор количества узлов, рекомендуемых для развертывания кластера. См. подробнее [в разделе «Сценарии развертывания»](#сценарии-развертывания).

## Сценарии развертывания

В разделе приведен примерный расчет ресурсов, необходимых для кластера в зависимости от предполагаемой нагрузки.

В состав любого сценария могут входить следующие типы узлов:

* **master-узел** — узлы, управляющие кластером;
* **frontend-узлы** — узлы, балансирующие входящий трафик, на них работают Ingress-контроллеры;
* **узлы мониторинга** — служат для запуска Grafana, Prometheus и других компонентов мониторинга;
* **системные узлы** — предназначены для запуска модулей Deckhouse;
* **worker-узлы** — предназначены для запуска пользовательских приложений.

Подробнее с этими типами узлов можно ознакомиться [в секции «Особенности конфигурации»](https://deckhouse.ru/products/kubernetes-platform/guides/production.html#%D0%BE%D1%81%D0%BE%D0%B1%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8) раздела «Подготовка к production».

### Минимальная конфигурация кластера

Кластер в такой конфигурации подходит для небольших проектов с невысокой нагрузкой и надежностью. В такой кластер входят:

* **master-узел** — 1 шт.;
* **worker-узлы** — от 1 шт;.

Такая конфигурация потребует **от 8 CPU и 16 ГБ RAM**, плюс быстрые **диски с 400+ IOPS** для master-узлов.

{% alert level="warning" %}
Использование такого кластера может быть небезопасно, т.к. в случае выхода из строя единственного master-узла пострадает весь кластер.
{% endalert %}

### Типовая конфигурация кластера

Рекомендуемая конфигурация. Устойчива к отказам до двух мастер-узлов. Значительно повышает доступность сервисов.
В типовой кластер входят:

* **master-узлы** — 3 шт.;
* **frontend-узлы** — 2 шт;
* **системные узлы** — 2 шт.;
* **worker-узлы** — от 1 шт. в зависимости от предполагаемой нагрузки.

Такая конфигурация потребует **от 24 CPU и 48 ГБ RAM**, плюс быстрые **диски с 400+ IOPS** для мастер-узлов.

{% alert level="info" %}
Для компонентов Deckhouse желательно выделить отдельный [storageClass](https://deckhouse.ru/products/kubernetes-platform/documentation/v1/deckhouse-configure-global.html#parameters-storageclass) на быстрых дисках.
{% endalert %}

### Кластер с повышенной нагрузкой

В кластере с повышенной нагрузкой входят:

* **master-узлы** — 3 шт.;
* **frontend-узлы** — 2 шт;
* **системные узлы** — 2 шт.;
* **узлы мониторинга** — 2 шт;
* **worker-узлы** — от 1 шт. в зависимости от предполагаемой нагрузки.

Такая конфигурация потребует **от 28 CPU и 64 ГБ RAM**, плюс быстрые **диски с 400+ IOPS** для мастер-узлов и узлов мониторинга.

Для компонентов Deckhouse желательно выделить отдельный [storageClass](https://deckhouse.ru/products/kubernetes-platform/documentation/v1/deckhouse-configure-global.html#parameters-storageclass) на быстрых дисках.

## Требования к узлам кластера

Каждый из узлов кластера должен соответствовать следующим требованиям:

* [поддерживаемая ОС](https://deckhouse.ru/products/kubernetes-platform/documentation/v1/supported_versions.html);
* ядро Linux версии 5.7 или новее;
* **уникальный hostname** в пределах серверов (виртуальных машин) кластера;
* HTTP(S)-доступ до хранилища образов контейнеров `registry.deckhouse.ru` или корпоративному registry в случае установки в закрытом окружении;
* доступ к стандартным для используемой ОС репозиториям пакетов;
* на узле не должно быть установлено пакетов container runtime, например containerd или Docker;
* на узле должны быть установлены пакеты `cloud-utils` и `cloud-init` **и запущены соответствующим им службы**.

### Минимальные требования к узлам

Вне зависимости от условий эксплуатации будущего кластера и планируемых нагрузок рекомендуются следующие **минимальные ресурсы** для инфраструктурных узлов в зависимости от их роли в кластере:

* **Мастер-узел** — 4 CPU, 8 ГБ RAM, 60 ГБ дискового пространства на быстром диске (400+ IOPS);
* **Frontend-узел** — 2 CPU, 4 ГБ RAM, 50 ГБ дискового пространства.
* **Узел мониторинга** (для нагруженных кластеров) — 4 CPU, 8 ГБ RAM; 50 ГБ дискового пространства на быстром диске (400+ IOPS).
* **Системный узел**:
  * 2 CPU, 4 ГБ RAM, 50 ГБ дискового пространства — если в кластере есть выделенные узлы мониторинга;
  * 4 CPU, 8 ГБ RAM, 60 ГБ дискового пространства на быстром диске (400+ IOPS) — если в кластере нет выделенных узлов мониторинга.
* **Worker-узел** — требования аналогичны требованиям к master-узлу, но во многом зависят от характера запускаемой на узле (узлах) нагрузки.

{% alert level="warning" %}
Работа кластера на узлах с минимальными требованиями сильно зависит от набора включенных модулей DKP.

При большом количестве включенных модулей ресурсы узлов лучше увеличить.
{% endalert %}

### Требования к ресурсам для production

Для того чтобы в production-среде кластер не столкнулся с нехваткой ресурсов на узлах, а все модули в любых конфигурациях могли нормально работать, рекомендуются следующие системные требования для узлов:

* **Мастер-узел** — 4 CPU, 8 ГБ RAM, 60 ГБ дискового пространства на быстром диске (400+ IOPS);
* **Frontend-узел** — 2 CPU, 4 ГБ RAM, 50 ГБ дискового пространства.
* **Узел мониторинга** (для нагруженных кластеров) — 4 CPU, 8 ГБ RAM; 50 ГБ дискового пространства на быстром диске (400+ IOPS).
* **Системный узел**:
  * 6 CPU, 12 ГБ RAM, 50 ГБ дискового пространства — если в кластере есть выделенные узлы мониторинга;
  * 8 CPU, 16 ГБ RAM, 60 ГБ дискового пространства на быстром диске (400+ IOPS) — если в кластере нет выделенных узлов мониторинга.
* **Worker-узел** — 4 CPU, 12 ГБ RAM, 60 ГБ дискового пространства на быстром диске (400+ IOPS).

## Сообщество

{% alert %}
Следите за новостями проекта в [Telegram](https://t.me/deckhouse_ru).
{% endalert %}

Вступите в [сообщество](https://deckhouse.ru/community/about.html), чтобы быть в курсе важных изменений и новостей. Вы сможете общаться с людьми, занятыми общим делом. Это позволит избежать многих типичных проблем.

Команда Deckhouse знает, каких усилий требует организация работы production-кластера в Kubernetes. Мы будем рады, если Deckhouse позволит вам реализовать задуманное. Поделитесь своим опытом и вдохновите других на переход в Kubernetes.
