{%- if page.related_links and page.related_links.size > 0 %}
{%- assign all_module_links = page.related_links | where_exp: "item", "item.type == 'module_conf' or item.type == 'module_cluster_conf' or item.type == 'module_crds' or item.type == 'module_doc'" %}
{%- assign page_related_module_reference = "" | split: "" %}
{%- for link in all_module_links %}
  {%- assign module_doc_exists = all_module_links | where_exp: "item", "item.module == link.module and item.type == 'module_doc'" | size %}
  {%- if module_doc_exists > 0 %}
    {%- if link.type == 'module_doc' %}
      {%- assign page_related_module_reference = page_related_module_reference | push: link %}
    {%- endif %}
  {%- else %}
    {%- assign page_related_module_reference = page_related_module_reference | push: link %}
  {%- endif %}
{%- endfor %}
{%- assign page_related_module_reference = page_related_module_reference | sort: "module" %}
{%- assign page_related_global_reference = page.related_links | where_exp: "item", "item.type == 'global_conf' or item.type == 'global_crds'" %}
{%- assign max_links = page.related_links_max | default: 999 %}
{%- assign all_display_links = page_related_global_reference | concat: page_related_module_reference %}
{%- assign display_links = all_display_links | slice: 0, max_links %}
{% if display_links.size > 0 %}
  {%- alert level="info" %}
{{ site.data.i18n.common['related_reference_and_documentation_links'][page.lang] }}:
  {%- for link in display_links %}
- [{{ link.title }}]({{ link.url }})
  {%- endfor %}
  {%- endalert %}
{%- endif %}
{%- endif %}
