---
title: "–°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è"
permalink: ru/module-development/build/
lang: ru
---

<!-- @TODO –¥–æ–±–∞–≤–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π —Å–±–æ—Ä–∫–∏ -->

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ container registry.

## –°–æ—Å—Ç–∞–≤ –º–æ–¥—É–ª—è

–ú–æ–¥—É–ª—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —á–∞—Å—Ç–µ–π:
- **–û–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ Deckhouse –∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω–∞—Ö. –û–±—Ä–∞–∑—ã –æ–ø–∏—Å–∞–Ω—ã –≤ –ø–∞–ø–∫–µ [images](module_folder.md#images). –û–±—Ä–∞–∑—ã —Å–æ–¥–µ—Ä–∂–∞—Ç content-based —Ç–µ–≥–∏. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–º, –∫–∞–∫ —Å—Ç–∞–≤–∏—Ç—å —Ç–µ–≥–∏ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [werf](https://werf.io/documentation/v1.2/usage/build/process.html#tagging-images).
- **–û–±—Ä–∞–∑ –º–æ–¥—É–ª—è** –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ registry –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–≥–æ–≤ –æ–±—Ä–∞–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ](https://semver.org/lang/ru/) ‚Äî `semver`.
- **–†–µ–ª–∏–∑**. –§–∞–π–ª `release.yaml`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ registry. –†–µ–ª–∏–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Deckhouse Kubernetes Platform (DKP) –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –£ —Ä–µ–ª–∏–∑–æ–≤ –µ—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ —Ç–µ–≥–æ–≤: `semver`, –∫–∞–∫ —É –æ–±—Ä–∞–∑–∞ –º–æ–¥—É–ª—è, –∏ —Ç–µ–≥, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–∞–Ω–∞–ª—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, `alpha`, `beta`.

## –ò—Å—Ç–æ—á–Ω–∏–∫ –º–æ–¥—É–ª–µ–π

–ú–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—á–Ω–∏–∫ –º–æ–¥—É–ª–µ–π: –≤–ª–æ–∂–µ–Ω–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, —Å –∫–æ—Ç–æ—Ä–æ–π –ø–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç DKP.

–ü—Ä–∏–º–µ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –º–æ–¥—É–ª–µ–π –≤–Ω—É—Ç—Ä–∏ registry:

```tree
registry.example.io

    üìÅ modules-source
    ‚îú‚îÄ üìÅ module-1
    ‚îÇ  ‚îú‚îÄ üì¶ v1.23.1
    ‚îÇ  ‚îú‚îÄ üì¶ d4bf3e71015d1e757a8481536eeabda98f51f1891d68b539cc50753a-1589714365467
    ‚îÇ  ‚îú‚îÄ üì¶ e6073b8f03231e122fa3b7d3294ff69a5060c332c4395e7d0b3231e3-1589714362300
    ‚îÇ  ‚îú‚îÄ üì¶ v1.23.2
    ‚îÇ  ‚îî‚îÄ üìÅ release
    ‚îÇ     ‚îú‚îÄ üìù v1.23.1
    ‚îÇ     ‚îú‚îÄ üìù v1.23.2
    ‚îÇ     ‚îú‚îÄ üìù alpha
    ‚îÇ     ‚îî‚îÄ üìù beta
    ‚îî‚îÄ üìÅ module-2
       ‚îú‚îÄ üì¶ v0.30.147
       ‚îú‚îÄ üì¶ d4bf3e71015d1e757a8481536eeabda98f51f1891d68b539cc50753a-1589714365467
       ‚îú‚îÄ üì¶ e6073b8f03231e122fa3b7d3294ff69a5060c332c4395e7d0b3231e3-1589714362300
       ‚îú‚îÄ üì¶ v0.31.1
       ‚îî‚îÄ üìÅ release
          ‚îú‚îÄ üìù v0.30.147
          ‚îú‚îÄ üìù v0.31.1
          ‚îú‚îÄ üìù alpha
          ‚îî‚îÄ üìù beta
```

–ò—Å—Ç–æ—á–Ω–∏–∫ –º–æ–¥—É–ª–µ–π –∏–º–µ–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –ø–æ—ç—Ç–æ–º—É container registry —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ú–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–∫–∏–º–∏ container registry, –∫–∞–∫ [Docker Registry v2](https://github.com/distribution/distribution), [Harbor](https://goharbor.io/).

## –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –º–æ–¥—É–ª–µ–π

–í –ø—Ä–∏–º–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ [crane](https://github.com/google/go-containerregistry/tree/main/cmd/crane#crane). –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–µ –ø–æ [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://github.com/google/go-containerregistry/tree/main/cmd/crane#installation). –î–ª—è MacOS –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å brew.

* –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –º–æ–¥—É–ª–µ–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –º–æ–¥—É–ª–µ–π:

  ```shell
  crane ls registry.example.io/modules-source
  ```

  –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

  ```yaml
  module-1
  module-2
  ```

  –ì–æ—Ç–æ–≤–æ, –≤ `module source` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –º–æ–¥—É–ª—è.

* –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –æ–±—Ä–∞–∑–æ–≤ –º–æ–¥—É–ª—è `module-1`:

  ```shell
  crane ls registry.example.io/modules-source/module-1
  ```

  –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

  ```yaml
  v1.23.1
  d4bf3e71015d1e757a8481536eeabda98f51f1891d68b539cc50753a-1589714365467
  e6073b8f03231e122fa3b7d3294ff69a5060c332c4395e7d0b3231e3-1589714362300
  v1.23.2
  ```

  –ì–æ—Ç–æ–≤–æ, –≤ –º–æ–¥—É–ª–µ `module-1` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–≤–∞ –æ–±—Ä–∞–∑–∞ –º–æ–¥—É–ª—è –∏ –¥–≤–∞ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

* –í—ã–≤–æ–¥ —Ñ–∞–π–ª–æ–≤ –≤ –æ–±—Ä–∞–∑–µ –º–æ–¥—É–ª—è `v1.23.1`:

  ```shell
  $ crane export registry.example.io/modules-source/module-1:v1.23.1 - \
    | tar -tf -
  ```

  –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏–º.

* –í—ã–≤–æ–¥ –æ–±—Ä–∞–∑–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–æ–¥—É–ª—è –≤–µ—Ä—Å–∏–∏ `v1.23.1`:

  ```shell
  $ crane export registry.example.io/modules-source/module-1:v1.23.1 - \
    | tar -Oxf - images_digests.json
  ```

  –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

  ```json
  {
    "backend": "sha256:fcb04a7fed2c2f8def941e34c0094f4f6973ea6012ccfe2deadb9a1032c1e4fb",
    "frontend": "sha256:f31f4b7da5faa5e320d3aad809563c6f5fcaa97b571fffa5c9cab103327cc0e8"
  }
  ```

* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ä–µ–ª–∏–∑–æ–≤:

  ```sh
  crane ls registry.example.io/modules-source/module-1/release
  ```

  –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

  ```yaml
  v1.23.1
  v1.23.2
  alpha
  beta
  ```

  –ì–æ—Ç–æ–≤–æ, –≤ —ç—Ç–æ–º registry –±—ã–ª–æ –¥–≤–∞ —Ä–µ–ª–∏–∑–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –∫–∞–Ω–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: `alpha` –∏ `beta`.

* –í—ã–≤–æ–¥ –≤–µ—Ä—Å–∏–∏ –Ω–∞ –∫–∞–Ω–∞–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π `alpha`:

  ```shell
  $ crane export registry.example.io/modules-source/module-1/release:alpha - \
    | tar -Oxf - version.json
  ```

  –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

  ```json
  {"version":"v1.23.2"}
  ```
