---
title: Георезервирование
permalink: ru/architecture/geo-reserving.html
lang: ru
---

**Георезервирование** в контексте катастрофоустойчивости Deckhouse Kubernetes Platform — метод повышения отказоустойчивости, при котором несколько независимых кластеров Kubernetes объединяются в единую мультикластерную систему (мультикластер), распределенную по разным географическим локациям.

Deckhouse Kubernetes Platform предлагает разные инструменты для объединения нескольких кластеров в мультикластер. Благодаря этой возможности, при отсутствии доступных экземпляров приложения в одном кластере, внешний или внутренний трафик будет автоматически перенаправлен в другой кластер с доступной копией.

Объединение нескольких кластеров возможно:

- с помощью встроенного Service Mesh на основе Istio,
- с использованием сетевого функционала Deckhouse Kubernetes Platform на базе Cilium.

Для включения функции мультикластер необходимо развернуть по одному кластеру с Deckhouse Kubernetes Platform в каждом регионе, а после объединить их используя декларативный API. Для успешного внедрения необходимо, чтобы ваше приложение могло работать параллельно в разных регионах, а так же наличие стабильного сетевого канала между регионами. Правильно настроенная система обеспечивает глобальную катастрофоустойчивость приложения, гарантируя его бесперебойную работу даже при выходе из строя целого региона или облака.

Процесс объединения нескольких кластеров мультикластер описан в разделе [Межкластерное взаимодействие](../admin/network/inter-cluster-cooperation-overview.html).

## Балансировка входящего трафика в мультикластере

Для обеспечения катастрофоустойчивости в мультикластере может быть реализована балансировка входящего трафика внешним балансировщиком по одной из схем: `active-active` или `active-standby`. Балансировка настраивается администратором кластера.

### Балансировка по схеме active-active

При использовании схемы `active-active` внешний балансировщик распределяет трафик по нескольким активным кластерам например, в зависимости от региона, откуда пришли клиенты.

![Балансировка по схеме active-active](../images/architecture/active-active-balancing.png)

Особенности балансировки по схеме `active-active`:

- Все кластеры в мультикластере активны и обрабатывают трафик одновременно.
- Трафик направляется в ближайший к клиенту, наименее загруженный кластер или используются иные правила.
- Общие данные, если есть, реплицируются между кластерами.
- При сбое одного кластера трафик переключается на другие (автоматический failover).

### Балансировка по схеме active-standby

При использовании схемы `active-standby` внешний балансировщик направляет трафик в кластер, который активен в данный момент. Неактивный кластер является резервным, трафик в него будет направлен, если основной кластер будет недоступен.

![Балансировка по схеме active-standby](../images/architecture/active-standby-balancing.png)

Особенности балансировки по схеме `active-standby`:

- Активный кластер принимает весь трафик.
- Резервный кластер бездействует до момента сбоя основного.
- Переключение трафика с активного на резервный кластер (failover) происходит автоматически при обнаружении проблем.

## Организация хранилища в мультикластере

За организацию и настройку хранилища в мультикластере отвечает администратор. В Deckhouse Kubernetes Platform поддерживаются разные системы хранения (хранилища). Выбор подходящего варианта зависит от ваших потребностей. Подробнее о системах хранения, их особенностях и настройке — в разделе [хранение](../admin/storage/overview.html).
