---
title: Модель C4
permalink: ru/architecture/c4-model/
lang: ru
search: C4 model, модель C4
---

Модель С4 используется для графического изображения архитектуры системы и объяснения декомпозиции системы на элементы. Диаграммы в этой модели организуются по принципу увеличения масштаба и детализации элементов:

* **Уровень 1: диаграмма контекста.** Отражает положение системы во внешнем контексте: возможные пользовательские роли и другие системы, непосредственно участвующие в работе.

* **Уровень 2: диаграмма контейнеров.** Разбивает систему на контейнеры (основные подсистемы) и отражает основные пути взаимодействия между ними. Контейнер в модели C4 (не путать с контейнерами Docker/Kubernetes) - это исполняемая и развертываемая подсистема, например, исполняемый файл.

* **Уровень 3: диаграмма компонентов.** Разбивает каждый контейнер на компоненты и отражает взаимодействие компонентов между собой (внутри одного контейнера) и с другими контейнерами. Компонент в модели C4 - это программный модуль (подсистема) в коде контейнера (исполняемого файла). Этот уровень описан в архитектурных диаграммах каждого сервиса.

* **Уровень 4: диаграмма кода.**  Описывает элементы кода, с помощью которых реализуются компоненты.

Из-за большого количества элементов-контейнеров на уровне 2, показать здесь диаграмму контейнеров целиком не представляется возможным. По этой причине после диаграммы уровня 1 будут показаны промежуточные диаграммы:

* **Диаграмма подсистем** - 11 подсистем.
* **Диаграмма модулей** - больше 40 модулей, сгруппированных по подсистемам.

Диаграммы уровня 2 и выше будут приведены для отдельных модулей в разделах, описывающих их архитектуру.

Чтобы получить общее представление об архитектуре Deckhouse Kubernetes Platform (DKP), вам будет достаточно изучить диаграммы уровня 1 и диаграммы подсистем и модулей. Если же вам интересно устройство каждого сервиса, изучите диаграммы уровня 2 и выше (с фокусом на отдельные модули).

## Условные обозначения

Для элементов диаграмм используется следующие графические символы:

<!--- Source: structurizr code from https://fox.flant.com/team/d8-system-design/doc/-/tree/main/architecture/diagrams/C4 --->
![c4-legend](../../images/architecture/c4-legend.png)

## Диаграмма контекста (уровень 1 модели C4)

<!--- Source: structurizr code from https://fox.flant.com/team/d8-system-design/doc/-/tree/main/architecture/diagrams/C4 --->
![c4-context](../../images/architecture/c4-l1-context.png)

В DKP используются следующие роли:

* **Администратор** - устанавливает и настраивает платформу.
* **Инженер безопасности** - управляет информационной безопасностью.
* **Разработчик** - использует платформу для установки и тестирования разрабатываемых приложений.
* **Пользователь** - использует запущенные на платформе приложения.

Взаимодействие с внешними сервисами описано в диаграммах следующих уровней.

## Диаграмма подсистем (промежуточный уровень)

На данной диаграмме изображены подсистемы DKP.

{% alert level="info" %}
Чтобы рассмотреть диаграммы в увеличенном масштабе, кликните по нужному изображению правой кнопкой мыши и выберите `Открыть изображение в новой вкладке` или `Сохранить изображение как`.
{% endalert %}

<!--- Source: structurizr code from https://fox.flant.com/team/d8-system-design/doc/-/tree/main/architecture/diagrams/C4 --->
![c4-subsystems](../../images/architecture/c4-subsystems.png)

Связи между подсистемами платформы указаны не все и без детализации. Диаграммы уровня 2 модели C4 "увеличивают масштаб" этого представления и позволяют увидеть, какие конкретные компоненты участвуют во взаимодействиях с описанием каждого взаимодействия.

## Диаграмма модулей (промежуточный уровень)

На данной диаграмме изображены все модули, включенные в [набор модулей (bundle)](/products/kubernetes-platform/documentation/v1/admin/configuration/#%D0%BD%D0%B0%D0%B1%D0%BE%D1%80%D1%8B-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9) Default, плюс наиболее важные из дополнительных модулей. Модули сгруппированы по подсистемам.

<!--- Source: structurizr code from https://fox.flant.com/team/d8-system-design/doc/-/tree/main/architecture/diagrams/C4 --->
![c4-modules](../../images/architecture/c4-modules.png)

Связи между модулями также указаны не все и без детализации. Диаграммы уровня 2 модели C4 "увеличивают масштаб" этого представления и позволяют увидеть, какие конкретные компоненты модулей участвуют во взаимодействиях с описанием каждого взаимодействия.
