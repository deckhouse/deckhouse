---
title: Контроль целостности
permalink: ru/architecture/security/integrity-control.html
lang: ru
search: integrity control, container integrity, security verification, container validation, integrity checking, контроль целостности, проверка безопасности, валидация контейнеров, проверка целостности
---

Контроль целостности — совокупность механизмов проверки контейнеров для обеспечения безопасности и их соответствия заданной конфигурации.

В Deckhouse Kubernetes Platform (DKP) контроль целостности работает:

- при запуске контейнеров приложений;
- во время работы контейнеров приложений.

## Контроль целостности при запуске контейнеров

DKP обеспечивает контроль целостности контейнеров приложений на уровне контейнерного рантайма (CRI).

После скачивания образа приложения DKP проверяет его целостность, сверяя хеш-сумму SHA-256.
Запуск контейнера возможен только при успешной проверке контрольной суммы.

Последовательность контроля целостности при запуске:

1. Загрузка образа в локальное хранилище узла.
1. Извлечение метаданных образа, включая хеш-сумму SHA-256.
1. Верификация SHA-256 путем сравнения с эталонной.
1. Если хеш совпадает, проверка пройдена. Если хеш не совпадает, образ не запускается.

Для повышения уровня безопасности вы также можете настраивать политики загрузки образов при использовании [политик безопасности](../../admin/configuration/security/policies.html), чтобы гарантировать использование актуальных версий образов для запуска контейнеров.

## Контроль целостности работающих контейнеров

Аудит событий безопасности в DKP включает в себя анализ событий ядра Linux и аудита событий Kubernetes API. Это позволяет отслеживать, что приложения в подах работают в неизменном виде, соответствуют ожидаемому состоянию и не были модифицированы.

Для аудита используются:

- встроенные правила;
- пользовательские правила, которые можно добавлять с использованием [синтаксиса условий Falco](https://falco.org/docs/concepts/rules/conditions/).

В процессе контроля целостности работающих контейнеров могут выявляться такие угрозы, как запуск оболочек командной строки в контейнерах или подах, обнаружение контейнеров, работающие в привилегированном режиме, монтирование небезопасных путей в контейнеры, попытки чтения секретных данных.

Подробнее о настройках аудита безопасности — в разделе [«Аудит событий безопасности»](../../admin/configuration/security/events/runtime-audit.html).
