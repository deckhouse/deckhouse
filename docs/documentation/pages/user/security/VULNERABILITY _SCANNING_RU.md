---
title: "Сканирование контейнерных образов на уязвимости"
permalink: ru/user/security/scanning.html
lang: ru
---

Deckhouse Kubernetes Platform (DKP) предоставляет встроенное средство для автоматического поиска уязвимостей
в контейнерных образах на основе проекта [Trivy](https://github.com/aquasecurity/trivy).

Ниже приведены команды для просмотра и фильтрации отчётов о результатах сканирования уязвимостей и CIS compliance-проверок, выполненных в кластере.

## Просмотр результатов CIS compliance-проверки

- Чтобы вывести все ресурсы, которые не прошли проверку:

  ```shell
  d8 k get clustercompliancereports.aquasecurity.github.io cis -ojson |
    jq '.status.detailReport.results | map(select(.checks | map(.success) | all | not))'
  ```

- Чтобы выполнить поиск по идентификатору конкретной проверки:

  ```shell
  check_id="5.7.3"
  d8 k get clustercompliancereports.aquasecurity.github.io cis -ojson |
    jq --arg check_id "$check_id" '.status.detailReport.results | map(select(.id == $check_id))'
  ```

- Чтобы выполнить поиск по описанию проверки:

  ```shell
  check_desc="Apply Security Context to Your Pods and Containers"
  d8 k get clustercompliancereports.aquasecurity.github.io cis -ojson |
    jq --arg check_desc "$check_desc" '.status.detailReport.results | map(select(.description == $check_desc))'
  ```
