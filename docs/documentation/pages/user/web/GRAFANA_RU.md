---
title: "Grafana"
permalink: ru/user/web/grafana.html
lang: ru
---

## Веб-интерфейс системы мониторинга

В качестве веб-интерфейса системы мониторинга используется Grafana.

### Главный экран

На главном экране Grafana расположена основная информация о кластере и его основных компонентах.

В левой верхней части экрана указаны характеристики основных компонентов кластера: версия containerd, дистрибутив Linux, на базе которого работает кластер, а также версии Grafana, Prometheus и т.д.

В правой верхней части экрана расположены удобные графические обозначения для основных параметров — количества узлов кластере, количество запущенных в ней подов и других сущностей кластера.

Для получения более подробной информации можно навести на любой элемент курсор мыши, нужная информация отображается во всплывающей подсказке:

Ниже блоков с характеристиками расположены быстрые ссылки на дашборды некоторых компонентов кластера. Например, на мониторинг узлов кластера, потребления системных ресурсов его компонентами и статистику сетевого взаимодействия.

Левее расположен блок со ссылками на веб-интерфейсы кластера, доступные для пользователя, а также блок с информацией о способе обновления кластера и временных окнах, в которые это обновление должно произойти (если они настроены).

В левом верхнем углу главного экрана расположена кнопка открытия бокового меню, в котором расположены ссылки на основные элементы Grafana.

При переходе на вкладку «Dashboards» откроется список всех доступных дашбордов Deckhouse, сгруппированных по категориям.

Они имеют вложенную структуру и сгруппированы по назначению — приложения в кластере (Applications), сетевое взаимодействие (Ingress Nginx), параметры кластера (Kubernetes Cluster), основные (Main) и безопасность (Security).

### Работа с дашбордами

Дашборд представляет собой экран с расположенными на нем таблицами и графиками, содержащими информацию о выбранном компоненте кластера.

### Фильтрация информации

В верхней части под названием и быстрой ссылкой на родительскую категорию располагается блок фильтров, позволяющий настроить отображение, исключив из выдачи несущественную информацию или сконцентрировав выбор на одном конкретном компоненте.

Например, на приведенном выше примере с дашбордом узлов кластера можно задать в фильтре отображение только одного из трех узлов, исключив из выдачи информацию об остальных двух узлах.

После выбора в фильтре параметров дашборд сразу же изменится, и содержимое будет заменено на соответствующее заданным параметрам фильтрации.

### Работа с данными

Каждый из представленных на дашборде графиков можно открыть в более подробном виде. Для этого необходимо навести курсор на правый верхний угол блока с графиком, нажать на появившуюся кнопку с тремя точками и выбрать пункт «View».

Выбранный график откроется на весь экран.

Здесь можно просмотреть более подробно информацию на графике за определенный момент времени. Для этого нужно навести курсор мыши на график — он примет вид красной горизонтальной черты, а рядом с ним отобразится всплывающее окошко с временной меткой и значением графика на этот момент:

Для перехода обратно на предыдущий экран достаточно нажать «Esc».

Просмотреть подробно список записей из которых строится график, можно, выбрав в меню блока (по кнопке с тремя точками в правом верхнем углу блока) пункт «Inspect» и соответствующий запросу подпункт «Data».

В правой части экрана откроется окно с подробным содержанием записей.

В открывшемся окне отобразятся все данные, из которых построен график. Здесь их также можно скачать в формате *.CSV и просмотреть общую статистику (например, общее количество записей). Для этого необходимо перейти на вкладку «Stats» окна со с данными.

### 5.3.1.5 Описание дашбордов

#### 5.3.1.5.1 Дашборд «Applications – Log Shipper»

Состояние модуля log-shipper.

Здесь представлено количество агентов модуля на узлах и их нагрузка.
5.3.1.5.2 Дашборд «Applications – Loki»
Состояние модуля loki.

5.3.1.5.3 Дашборд «Applications – Loki Logs»
Логи модуля loki.

5.3.1.5.4 Дашборды группы Ingress Nginx
Дашборды, связанные с Ingress-контроллерами.
5.3.1.5.4.1 Дашборд «Namespace Detail»
На этом дашборде отображается детализация компонентов в пространстве имен.

Детализация компонентов в пространстве имен. В фильтрах возможно выбрать конкретное пространство имен, Ingress, Service и другие параметры для отображения.

5.3.1.5.4.2 Дашборд «Namespaces»
Данные по Ingress-контроллеру в разрезе пространств имен кластера.

В фильтрах можно выбрать конкретное пространство имен, виртуальные хосты и тип контента.

5.3.1.5.4.3 Дашборд «VHost Detail»
Подробные данные по Ingress-контроллеру в разрезе виртуальных хостов.

5.3.1.5.4.4 Дашборд «VHost»
Сводные данные по Ingress-контроллеру в разрезе виртуальных хостов кластера.

В фильтрации можно выбрать конкретный виртуальный хост.
5.3.1.5.5 Дашборды группы «Kubernetes Cluster»
Дашборды, связанные с кластером Kubernetes.
5.3.1.5.5.1 Дашборд «Aggregating Proxy Cache»
Сводная информация по потребляемым прокси-сервером ресурсам.

5.3.1.5.5.2 Дашборд «Cilium Metrics»
Метрики модуля cni-cilium.

5.3.1.5.5.3 Дашборд «Control Plane Status»
Состояние управляющего слоя кластера.

5.3.1.5.5.4 Дашборд «Deprecated APIs»
Отображает состояния Kubernetes API, которое на текущий момент находится в состоянии прекращения поддержки. Также на нем расположены инструкции по миграции на актуальные версии и запросы к эндпоинтам этого API.

5.3.1.5.5.5 Дашборд «DNS (coredns)»
Данные о работе компонента coredns.

5.3.1.5.5.6 Дашборд «etcd3»
Состояние базы данных etcd.

5.3.1.5.5.7 Дашборд «External ping»
Статистика внешних запросов.

5.3.1.5.5.8 Дашборд «Ingress Nginx Controller Detail»
Параметры Ingress Nginx контроллера.

5.3.1.5.5.9 Дашборд «Ingress Nginx Controllers»
Подробные данные Ingress-контроллеры кластера.

5.3.1.5.5.10 Дашборд «Node»
Данные о работе узлов.

В фильтрах можно выбрать целевой узел для отображения статистики.
5.3.1.5.5.11 Дашборд «Nodes» - сводные данные о работе узлов кластера. В фильтрах можно выбрать конкретный узел.
5.3.1.5.5.12 Дашборд «Nodes ping» - пинг до узлов кластера.

5.3.1.5.5.13 Дашборд «NTP» - состояние сервера времени.

5.3.1.5.5.14 Дашборд «Prometheus Benchmark» - статус prometheus.

5.3.1.5.5.15 Дашборд «Prometheus-(self)» - сводная информация о состоянии prometheus.

5.3.1.5.6 Дашборды группы «Main»
Дашборды с общими данными о состоянии кластера.
5.3.1.5.6.1 Дашборд «Capacity Planning»
Сводные данные о производительности кластера.

5.3.1.5.6.2 Дашборд «Deckhouse»
Сводная информация о состоянии главного компонента deckhouse.

5.3.1.5.6.3 Дашборд «Namespace»
Данные по конкретному пространству имен кластера.

5.3.1.5.6.4 Дашборд «Namespace / Controller»
Данные по контроллерам в пространствах имен.

В фильтрах можно выбрать конкретные пространства имен и контроллеры.
5.3.1.5.6.5 Дашборд «Namespace / Controller / Pod»
Данные по подам в пространствах имен.

В фильтрах можно выбрать определенные пространства имен и поды в них.
5.3.1.5.6.6 Дашборд «Namespaces»
Сводные данные в разрезе пространств имен в кластере.

5.3.1.5.7 Дашборды группы Security
Работа с дашбордами группы Security описана в разделе 4.5. Просмотр журналов событий безопасности, Руководства Администратора.
