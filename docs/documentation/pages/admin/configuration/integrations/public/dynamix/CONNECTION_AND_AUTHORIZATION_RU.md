---
title: Подключение и авторизация
permalink: ru/admin/integrations/public/dynamix/dynamix-authorization.html
lang: ru
---

## Требования

Для интеграции Deckhouse Kubernetes Platform с Dynamix необходимо:

- доступ к API-контроллеру и SSO-контур Dynamix;
- данные учётной записи (account) и параметры приложения (`appId` и `appSecret`);
- размещённый в облаке cloud-образ операционной системы;
- внешняя сеть (`externalNetwork`) и, при необходимости, параметры внутренней сети (CIDR, DNS);
- сведения о хранилище (pool и storage endpoint);
- публичный SSH-ключ для доступа к узлам кластера.

## Подготовка cloud-образа

Для развёртывания виртуальных машин Deckhouse использует cloud-образы операционных систем, подготовленные вендорами для работы в виртуальной среде. Эти образы, как правило, включают:

- `cloud-init`;
- драйверы виртуального оборудования;
- гостевые агенты.

Рекомендуется использовать официальные cloud-образы, распространяемые в форматах `.img`, `.qcow2` и аналогичных.

Чтобы добавить образ в Dynamix:

1. Перейдите в раздел «Образы» → «Шаблонные образы».
1. Загрузите подготовленный cloud-образ.

## Настройка доступа к порталу

Если в вашей инфраструктуре отсутствует DNS-сервер, добавьте IP-адреса и домены портала Dynamix вручную в шаблон `cloud-init`, чтобы обеспечить корректную работу системы при запуске узлов.

1. Отредактируйте шаблон файла `hosts`, расположенный в каталоге:

   ```console
   /etc/cloud/templates/
   ```

1. Добавьте нужные записи в зависимости от используемой ОС.

1. После изменений выполните очистку состояния `cloud-init`:

   ```console
   cloud-init clean
   ```

1. Создайте шаблон на основе подготовленной виртуальной машины. Это необходимо для корректной генерации файла `/etc/hosts` на этапе первого запуска.
