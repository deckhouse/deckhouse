---
title: Проекты
permalink: ru/test/concepts/projects.html
lang: ru
---

> ФОКУС-РЕМАРКА: Тут общее описание. В том числе ответы на вопросы "зачем это надо", но глубже чем в глоссарии
>
> Уровень детализации: Общий (например, блок-схемы)

В данном разделе рассматривается общее описание [проектов](glossary.html#проект) и типичные сценарии их использования.

В Kubernetes существуют [пространства имён](glossary.html#пространства-имен), которые используются для группировки объектов в кластере. Также, пространства имён часто понимаются как способ изоляции нагрузки в кластере. Достичь изоляции с помощью пространств имён можно, но для этого необходимо использовать дополнительные механизмы и решения — сами по себе пространства имён не обеспечивают необходимого уровня изоляции нагрузки в кластере и управление доступом для разных пользователей и команд разработки.

Проекты, в отличие от пространств имён, дают возможность безопасно разделить кластер Deckhouse Kubernetes Platform на логические части.

## Преимущества

### Делегирование управления

Проекты позволяют использовать модель самообслуживания (Self-Service), при которой пользователи и команды разработки могут самостоятельно работать с частью кластера без прямого участия DevOps/SRE-команд, обеспечивающих работу кластера и его инфраструктуры. Это позволяет снизить нагрузку на инфраструктурные команды и повышает автономность команд разработки, ускоряя процесс развертывания приложения. Такая автономность не приводит к снижению уровня безопасности, так как проекты обеспечивают необходимую изоляцию в кластере и управление доступом.

Проект может также содержать [дополнительные проектные пространства имён](glossary.html#дополнительное-проектное-пространство-имён), которые позволяют администратору проекта разделить проект на логические части и делегировать управление ими.

### Изоляция

Проекты обеспечивают действительно изолированное окружение (по сравнению с пространствами имен Kubernetes), так как кроме группировки объектов в кластере проект содержит описание ограничений и квот, которые могут использоваться в рамках проекта, сетевые политики, политики доступа на основе [ролевой модели](glossary.html#ролевая модель) и другие ограничения.

Администраторы платформы могут задавать ограничения на проект, а администраторы проектов ограничивать использование кластера в дополнительных проектных пространствах имён, в рамках доступных квот и политик проекта.

Изоляция, предлагаемая в проектах, позволяет избежать конфликтов между разными командами разработки и приложениями, а также обеспечивает безопасность и управляемость в кластере.

### Шаблонизация

Проект создается на основе шаблона проекта, что позволяет обеспечить единообразие и избежать ошибок в конфигурации.

Шаблоны проектов позволяют администраторам платформы задавать общие настройки и ограничения для типовых проектов, а также использовать преднастроенные ресурсы и политики. При изменении шаблона проекта, все связанные с ним проекты будут обновлены в соответствии с новым шаблоном.

В Deckhouse Kubernetes Platform доступно для использования три встроенных шаблона проектов, покрывающих типичные сценарии использования. Эти шаблоны недоступны для изменения, но могут быть использованы для создания новых шаблонов проектов под конкретные задачи и требования.

В шаблонах проектов можно использовать переменные и функции Go templating, что позволяет создавать проекты с различными настройками и ограничениями, не изменяя сам шаблон.

### Управление доступностью функций

Администратор платформы может управлять тем, какие возможности Deckhouse Kubernetes Platform доступны в проекте.

На текущий момент администратор проекта может управлять возможностью использования виртуализации (запуск виртуальных машин) или контейнеризации (запуск контейнеров).

На текущий момент администратор проекта может управлять возможностью использования контейнеризации (запуск контейнеров и использование всех функций, применимых для работы с контейнерами) и виртуализации (запуск виртуальных машин и использование всех функций, применимых для работы с виртуальными машинами).

### Полная обратная совместимость

Deckhouse Kubernetes Platform использует [пространства имён](glossary.html#пространства-имен) при работе с проектами.

Проекты обеспечивают полную обратную совместимость с пространствами имен Kubernetes, что позволяет запускать приложения, которые работали в Kubernetes, без изменений.

## Структура

Проект содержит как минимум одно [основное проектное пространство имён](glossary.html#основное-проектное-пространство-имён) и может содержать несколько [дополнительных проектных пространств имён](glossary.html#дополнительное-проектное-пространство-имён).

Дополнительные проектные пространства имён создаются с помощью ресурса [ProjectNamespace](#TODO) и позволяют логически разделить проект на части.

<!--
```text
Deckhouse Cluster
│
├─ System namespaces
│     ├─ Namespace <d8-*>            ← Системное пространство имён
│     └─ Namespace <kube-*>          ← Системное пространство имён
│
└─ Project
     │  └─ Namespace <project-name>  ← Основное пространство имён
     │        ├─ ResourceQuota       ← Лимиты проекта
     │        ├─ NetworkPolicy       ← Лимиты проекта
     │        └─ RoleBinding         ← Лимиты проекта
     │ 
     ├─ ProjectNamespace 1
     │  └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
     │        ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
     │        ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
     │        └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
     │
     └─ ProjectNamespace 2
        └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
              ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
              ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
              └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
```
-->

![Структура проектов](../../images/multitenancy(test)/project-structure.svg "Структура проектов")

## Имя проекта

Имя [проекта](glossary.html#проект) — уникальный идентификатор проекта в Deckhouse Kubernetes Platform. Оно используется при создании [основного проектного пространства имён](glossary.html#основное-проектное-пространство-имён) и [дополнительного проектного пространств имён](glossary.html#дополнительное-проектное-пространство-имён).

При создании проекта создаётся основное проектное пространство имён с таким же именем, как у проекта.

При создании дополнительного проектного пространства имён внутри проекта к его имени добавляется префикс `<project-name>-`. Таким образом, полное имя дополнительного проектного пространства имён будет выглядеть как `<project-name>-<project-namespace-name>`, где `<project-name>` — имя проекта, а `<project-namespace-name>` — имя дополнительного проектного пространства имён.

Имя проекта в Deckhouse Kubernetes Platform имеет следующие ограничения:
- Длина имени не более 61 символа.
- Допустимые символы в имени:
  - Буквы: a-z, A-Z
  - Цифры: 0-9
  - Дефис: "-"
  - Точка: "."
- Имя должно начинаться и заканчиваться буквой или цифрой, но не может состоять только из цифр.
- Не должно начинаться с `d8-` или `kube-`.

## Типичные сценарии применения

[Проекты](glossary.html#проект) помогают выделять в кластере изолированные области для приложений и команд с собственными ресурсами, правами и уровнями доступа. Администратор кластера создаёт проект по шаблону, назначает квоты и роли, после чего команда самостоятельно управляет [полезной нагрузкой](glossary.html#полезная-нагрузка) внутри проекта. Настройки можно расширять или ограничивать по мере необходимости.

### Развёртывание простого приложения

Когда нужно запустить приложение в кластере, в платформе для этого создаётся отдельный проект:

- Пользователь просит администратора кластера создать проект под приложение (например, `myapp`).
- Администратор кластера создаёт проект по шаблону `default`: появляется [основное проектное пространство имён](glossary.html#основное-проектное-пространство-имён) `myapp`, задаются базовые квоты и роли.
- Пользователь развёртывает приложение основном проектном пространстве имён `myapp` и работает в рамках назначенных прав.

Таким образом приложение запущено в изолированном окружении, ресурсы и доступы управляются через проект.

### Развёртывание сложного приложения

Когда у приложения есть несколько частей с разными командами разработки или жизненными циклами, проект можно удобно разделить [дополнительными проектными пространствами имён](glossary.html#дополнительное-проектное-пространство-имён). Это позволит разработчикам изолированно работать над одним приложением, а для каждой части приложения будут выделены свои лимиты ресурсов.

- В проекте `myapp` в приложении MyApp есть frontend и backend-часть с набором соответствующих ресурсов.
- Администратор проекта при помощи ресурса [ProjectNamespace](#TODO) добавляет в проект `myapp` дополнительные проектные пространства имён: `myapp-front` (доступ имеют frontend-разработчики) и `myapp-back` (доступ имеют backend-разработчики).
- Для каждого дополнительного проектного пространства имён задаются уровни доступа и квоты — команда frontend-разработчиков может использовать ресурсы внутри `myapp-front`, но не внутри `myapp-back`.

![Сценарии применения](../../images/multitenancy(test)/use-cases.svg "Сценарии применения")

Теперь одно приложение разделено на независимые компоненты с чёткими границами доступа и ресурсов.

### Делегирование управления проектом командам разработки

Проекты позволяют делегировать управление полезной нагрузкой командам разработки, сохраняя стандарты и ограничения через шаблон:

- Администратор кластера создаёт проект `myproject` по [шаблону `default`](../admin/PROJECTS_RU.md#встроенные-шаблоны-проектов) (преднастроенные сетевые политики, лимиты CPU/RAM, RBAC, мониторинг).
- На уровне проекта задаются квоты (например, 20 CPU, 64 GiB RAM) и включаются необходимые [возможности проекта](../architecture/projects.html#возможности-проектов) — например, создание виртуальных машин.
- Лидеру команды выдаются права администратора проекта.
- Администратор проекта создаёт дополнительные проектные пространства имён (например, `prod`, `stage`, `test`), настраивает доступы для разработчиков и распределяет квоты внутри проекта.
- Команда разработчиков развёртывает и настраивает приложение в рамках политик, заданных шаблоном.

Таким образом команда получает автономию над своим проектом, а администратор кластера — изоляцию и контроль ресурсов без ручного сопровождения каждого релиза.

### Создание изолированных контуров для тестирования и обучения

При помощи проектов можно безопасно выделить ограниченную зону для тестовых окружений, не влияя на рабочие нагрузки:

- Администратор кластера создаёт шаблон `unprivileged` на основе шаблона `default`, устанавливая максимальные ограничения:
  - Жёсткие лимиты CPU/RAM, строгие сетевые политики (изоляция «по умолчанию»),
  - Запрет на создание привилегированных контейнеров;
  - Запрет на создание виртуальных машин.
- Администратор кластера создаёт проект `test` по шаблону `unprivileged`.
- Назначаются администраторы проекта (руководители команд R&D или инструкторы).
- Администратор проекта создаёт дополнительные проектные пространства имён под группы/занятия (например, `team-alpha-test`, `training-k8s-101`), выдаёт временные доступы и контролирует потребление ресурсов в рамках квот.

Таким образом тестовые нагрузки изолированы, тестовые окружения не влияют на рабочие нагрузки, а создание и удаление песочниц стандартизировано и выполняется быстро по запросу.

<!--

> Старое описание:

### Выделение изолированной области кластера под полезную нагрузку

Проекты позволяют администратору кластера создавать изолированные области для [делегирования управления](#делегирование-управления) полезной нагрузкой пользователям:

- Пользователь обращается к администратору кластера с запросом на создание проекта под его приложение.
- Администратор создаёт проект: настраивает квоты/лимиты и уровни доступа в соответствии с [шаблоном](#шаблонизация), назначает пользователя администратором проекта.
- Пользователь развёртывает приложение и управляет его ресурсами в рамках назначенных прав.
- По мере роста потребностей пользователь запрашивает корректировки; администратор кластера меняет квоты и политики не затрагивая другие проекты.

Таким образом вся полезная нагрузка в кластере будет изолирована от других приложений, а её лимиты и уровни доступа будут легко регулироваться администратором кластера.

### Выделение части кластера для запуска сложного приложения

Когда у приложения есть части с разными командами или жизненными циклами, проект можно удобно разделить [дополнительными проектными пространствами имён](glossary.html#дополнительное-проектное-пространство-имён). Таким образом над одним приложением смогут изолированно работать различные команды, и для каждой части приложения будут выделены свои лимиты ресурсов.

- В приложении MyApp есть frontend и backend-часть с набором соответствующих ресурсов.
- Администратор проекта добавляет в проект `myapp` дополнительные проектные пространства имён: `myapp-front` и `myapp-back`.
- Для каждого дополнительного проектного пространства имён задаются уровни доступа и квоты — команда frontend-разработчиков может использовать ресурсы внутри `myapp-front`, но не внутри `myapp-back`.

![Сценарии применения](../../images/multitenancy(test)/use-cases.svg "Сценарии применения")

Теперь оба дополнительных проектных пространства имён изолированы друг от друга внутри проекта.

### Разграничение полезной нагрузки по возможностям проекта

Используя [возможности проектов](../architecture/projects.html#возможности-проектов) можно разделить полезную нагрузку так, чтобы одни пользователи работали только с виртуальными машинами, а другие — только с контейнерными приложениями:

- Администратор проекта `myproject` создаёт два дополнительных проектных пространства имён: `myproject-vm` и `myproject-app`.
- Для каждого из дополнительных проектных пространств имён задаются определённые возможности проекта:
  - Пользователи внутри `myproject-vm` могут использовать только виртуальные машины.
  - Пользователи внутри `myproject-app` могут использовать только контейнерные приложения.

Таким образом в одном проекте сосуществуют контейнерные приложения и ВМ, разделённые по пространствам имён и правам. Квоты и доступы управляются централизованно на уровне проекта, а команды работают автономно в пределах выданных полномочий.
-->

## Дополнительные ресурсы

- [Управление проектами](../admin/projects.html)
- [Управление полезной нагрузкой](../user/projects.html)
- [Архитектура проектов](../architecture/projects.html)
