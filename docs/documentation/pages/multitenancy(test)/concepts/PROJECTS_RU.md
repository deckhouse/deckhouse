---
title: Проекты
permalink: ru/test/concepts/multitenancy/projects.html
lang: ru
---

[Проекты](../glossary.html#проект) похожи на [пространства имен](../glossary.html#пространство-имён) в Kubernetes, но имеют больше возможностей. Пространства имен используются для логического разделения ресурсов в Kubernetes, и, например, не ограничивают сетевое взаимодействие или потребление ресурсов подами. Такие особенности не удовлетворяют современные требования к разработке.

В данном разделе рассматриваются [структура проектов](#структура), основные [преимущества](#преимущества) и [ограничения](#ограничения) их использования в Deckhouse, а также [типичные сценарии применения](#типичные-сценарии-применения).

- Более детальная информация о проектах находится в [разделе "Архитектура"](../../architecture/multitenancy/projects.html).
- Процессы создания проектов при помощи встроенных и собственных шаблонов описаны в [разделе "Администрирование"](../../admin/multitenancy/projects.html).
- Управление [полезной нагрузкой](../glossary.html#полезная-нагрузка) внутри проекта описано в [разделе "Использование"](../../user/multitenancy/projects.html).

## Структура

[Пространства имен](../glossary.html#пространство-имён) в Deckhouse представлены в виде [системных](../glossary.html#системное-пространство-имён) и [пользовательских](../glossary.html#пользовательское-пространство-имён). Системные пространства имён обеспечивают работоспособность платформы, в то время как пользовательские предназначены для управления [полезной нагрузкой](../glossary.html#полезная-нагрузка). Все пользовательские пространства имён являются [проектами](../glossary.html#проект).

Проект содержит как минимум одно [основное проектное пространство имён](../glossary.html#основное-проектное-пространство-имён). В рамках проекта могут создаваться [дополнительное проектные пространства имён](../glossary.html#дополнительное-проектное-пространство-имён) ([ресурс ProjectNamespace](#TODO)). Они позволяют логически разделить сервисы и ресурсы внутри проекта, а также применить к ним отдельные политики доступа и лимиты ресурсов.

<!--
```text
Deckhouse Cluster
│
├─ System namespaces
│     ├─ Namespace <d8-*>            ← Системное пространство имён
│     └─ Namespace <kube-*>          ← Системное пространство имён
│
└─ Project
     │  └─ Namespace <project-name>  ← Основное пространство имён
     │        ├─ ResourceQuota       ← Лимиты проекта
     │        ├─ NetworkPolicy       ← Лимиты проекта
     │        └─ RoleBinding         ← Лимиты проекта
     │ 
     ├─ ProjectNamespace 1
     │  └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
     │        ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
     │        ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
     │        └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
     │
     └─ ProjectNamespace 2
        └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
              ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
              ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
              └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
```
-->

![Структура проектов](../../../images/multitenancy(test)/project-structure.svg)

## Преимущества

- Ограничение ресурсов — [проекту](../glossary.html#проект) задаётся желаемая квота CPU, RAM и максимальное число [дополнительных проектных пространств имён](../glossary.html#дополнительное-проектное-пространство-имён). Дополнительные проектные пространства имён могут задавать свои собственные квоты внутри проекта, которые не могут превышать лимиты родителя.
- Обратная совместимость — проекты полностью совместимы с обычными пространствами имён Kubernetes, что позволяет использовать стандартные возможности Kubernetes.
- [Шаблонизация](../../architecture/multitenancy/projects.html#шаблоны-проектов) — все проекты создаются по шаблону [ProjectTemplate](#TODO), что позволяет избежать ошибок и обеспечить единообразие. При изменении ресурса все проекты, созданные по этому шаблону, будут обновлены в соответствии с новым шаблоном. Администраторы платформы могут создавать собственные шаблоны проектов, либо воспользоваться шаблонами по умолчанию.
- [Изоляция](../../architecture/multitenancy/projects.html#механизмы-изоляции) — каждый проект обеспечивает изолированное окружение, где разработчики могут развернуть экземпляр приложения без влияния на другие проекты. Проекты позволяют разделить приложение на логические части и назначать для каждого дополнительного проектного пространства имён отдельные политики доступа.
- [Управление доступом к платформам](../../architecture/multitenancy/projects.html#управление-доступом-к-платформам) — проекты могут предоставлять доступ к определённым платформам (например, к Deckhouse Virtualization Platform в случае отдельного лицензирования). Дополнительные проектные пространства имён не обладают доступами, которых нет у [основного](../glossary.html#основное-проектное-пространство-имён).

## Ограничения

- Имя [проекта](../glossary.html#проект) не должно превышать 61 символ.
- Имя проекта не может начинаться с `d8‑` или `kube‑`. Такие имена зарезервированы для [системных пространств имён](../glossary.html#системное-пространство-имён).
- Все права [дополнительных проектных пространств имён](../glossary.html#дополнительное-проектное-пространство-имён) обязаны быть подмножеством [основного проектного пространства имён](../glossary.html#основное-проектное-пространство-имён).
- Если параметр `АllowNamespacesWithoutProjects` конфигурации модуля `multitenancy-manager` установлен в `false`, создание [пространств имён](../glossary.html#пространство-имён) напрямую в кластере запрещено.

## Типичные сценарии применения

Типичный сценарий применения проектов заключается в разделении существующего [пользовательского пространства имён](../glossary.html#пользовательское-пространство-имён) на несколько связанных между собой, которые могут быть выделены для разных команд или сервисов. Рассмотрим пример разделения пользовательского приложения, развернутого в пространстве имен `myapp`.

В приложении MyApp есть frontend и backend-часть с набором соответствующих ресурсов. При помощи [дополнительных проектных пространств имён](../glossary.html#дополнительное-проектное-пространство-имён) можно выделить в [проекте](../glossary.html#проект) две части, изолировав frontend и backend друг от друга. При этом на них будут распространяться квоты проекта, если они не заданы для каждого дополнительного пространства имён проекта явно:

<!--
```text
Рабочий вариант схемы, будет изменён позже.

Project: delivery
      └─ Namespace: delivery          ← Основное пространство имён
            ├─ Deployment: frontend
            └─ Deployment: backend
```

```text
Рабочий вариант схемы, будет изменён позже.

Project: delivery
│     └─ Namespace: delivery                                           ← Основное пространство имён
│           └─ ResourceQuota (4 CPU, 40 GiB RAM, 2 ProjectNamespaces)  ← Ограничение ресурсов проекта
│
├─ ProjectNamespace: delivery-front
│     └─ Namespace: delivery-front                ← Проектное пространство имён, изолированная часть приложения, относящаяся к frontend.
│           ├─ ResourceQuota (1 CPU, 10 GiB RAM)  ← Ограничение ресурсов проектного пространства имён (не превышает квоты проекта)
│           └─ Deployment: frontend
│
├─ ProjectNamespace: delivery-front
      └─ Namespace: delivery-front                ← Проектное пространство имён, изолированная часть приложения, относящаяся к backend.
            ├─ ResourceQuota (3 CPU, 30 GiB RAM)  ← Ограничение ресурсов проектного пространства имён (не превышает квоты проекта)
            └─ Deployment: backend
```
-->

![Сценарии применения](../../../images/multitenancy(test)/use-cases.svg)

Данное разделение поможет распределить доступные проекту ресурсы, а также разграничить уровни доступа между пользователями внутри проекта. Если администратор платформы ограничит доступ к ресурсам дополнительного проектного пространства имён `myapp-front`, то пользователи, имеющие доступ к дополнительному проектному пространству имён `myapp-back`, не будут иметь доступ к ресурсам `myapp-front`.
