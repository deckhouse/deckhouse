---
title: Проекты
permalink: ru/test/concepts/projects.html
lang: ru
---

> ФОКУС-РЕМАРКА: Тут общее описание. В том числе ответы на вопросы "зачем это надо", но глубже чем в глоссарии
>
> Уровень детализации: Общий (например, блок-схемы)

В данном разделе рассматривается общее описание [проектов](glossary.html#проект) и типичные сценарии их использования.

В Kubernetes существуют [пространства имён](glossary.html#пространства-имен), которые используются для группировки объектов в кластере. Также, пространства имён часто понимаются как способ изоляции нагрузки в кластере. Достичь изоляции с помощью пространств имён можно, но для этого необходимо использовать дополнительные механизмы и решения — сами по себе пространства имён не обеспечивают необходимого уровня изоляции нагрузки в кластере и управление доступом для разных пользователей и команд разработки.

Проекты, в отличие от пространств имён, дают возможность безопасно разделить кластер Deckhouse Kubernetes Platform на логические части.

## Преимущества

### Делегирование управления

Проекты позволяют использовать модель самообслуживания (Self-Service), при которой пользователи и команды разработки могут самостоятельно работать с частью кластера без прямого участия DevOps/SRE-команд, обеспечивающих работу кластера и его инфраструктуры. Это позволяет снизить нагрузку на инфраструктурные команды и повышает автономность команд разработки, ускоряя процесс развертывания приложения. Такая автономность не приводит к снижению уровня безопасности, так как проекты обеспечивают необходимую изоляцию в кластере и управление доступом.

Проект может также содержать [дополнительные проектные пространства имён](glossary.html#дополнительное-проектное-пространство-имён), которые позволяют администратору проекта разделить проект на логические части и делегировать управление ими.

### Изоляция

Проекты обеспечивают действительно изолированное окружение (по сравнению с пространствами имен Kubernetes), так как кроме группировки объектов в кластере проект содержит описание ограничений и квот, которые могут использоваться в рамках проекта, сетевые политики, политики доступа на основе [ролевой модели](glossary.html#ролевая модель) и другие ограничения.

Администраторы платформы могут задавать ограничения на проект, а администраторы проектов ограничивать использование кластера в дополнительных проектных пространствах имён, в рамках доступных квот и политик проекта.

Изоляция, предлагаемая в проектах, позволяет избежать конфликтов между разными командами разработки и приложениями, а также обеспечивает безопасность и управляемость в кластере.

### Шаблонизация

Проект создается на основе шаблона проекта, что позволяет обеспечить единообразие и избежать ошибок в конфигурации.

Шаблоны проектов позволяют администраторам платформы задавать общие настройки и ограничения для типовых проектов, а также использовать преднастроенные ресурсы и политики. При изменении шаблона проекта, все связанные с ним проекты будут обновлены в соответствии с новым шаблоном.

В Deckhouse Kubernetes Platform доступно для использования три встроенных шаблона проектов, покрывающих типичные сценарии использования. Эти шаблоны недоступны для изменения, но могут быть использованы для создания новых шаблонов проектов под конкретные задачи и требования.

В шаблонах проектов можно использовать переменные и функции Go templating, что позволяет создавать проекты с различными настройками и ограничениями, не изменяя сам шаблон.

### Управление доступностью функций

Администратор платформы может управлять тем, какие возможности Deckhouse Kubernetes Platform доступны в проекте.

На текущий момент администратор проекта может управлять возможностью использования виртуализации (запуск виртуальных машин) или контейнеризации (запуск контейнеров).

На текущий момент администратор проекта может управлять возможностью использования контейнеризации (запуск контейнеров и использование всех функций, применимых для работы с контейнерами) и виртуализации (запуск виртуальных машин и использование всех функций, применимых для работы с виртуальными машинами).

### Полная обратная совместимость

Deckhouse Kubernetes Platform использует [пространства имён](glossary.html#пространства-имен) при работе с проектами.

Проекты обеспечивают полную обратную совместимость с пространствами имен Kubernetes, что позволяет запускать приложения, которые работали в Kubernetes, без изменений.

## Структура

Проект содержит как минимум одно [основное проектное пространство имён](glossary.html#основное-проектное-пространство-имён) и может содержать несколько [дополнительных проектных пространств имён](glossary.html#дополнительное-проектное-пространство-имён).

Дополнительные проектные пространства имён создаются с помощью ресурса [ProjectNamespace](#TODO) и позволяют логически разделить проект на части.

<!--
```text
Deckhouse Cluster
│
├─ System namespaces
│     ├─ Namespace <d8-*>            ← Системное пространство имён
│     └─ Namespace <kube-*>          ← Системное пространство имён
│
└─ Project
     │  └─ Namespace <project-name>  ← Основное пространство имён
     │        ├─ ResourceQuota       ← Лимиты проекта
     │        ├─ NetworkPolicy       ← Лимиты проекта
     │        └─ RoleBinding         ← Лимиты проекта
     │ 
     ├─ ProjectNamespace 1
     │  └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
     │        ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
     │        ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
     │        └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
     │
     └─ ProjectNamespace 2
        └─ Namespace <project-name>-<project-namespace-name-1>  ← Проектное пространство имён
              ├─ ResourceQuota       ← Можно изменять в пределах лимитов проекта
              ├─ NetworkPolicy       ← Можно изменять в пределах лимитов проекта
              └─ RoleBinding         ← Можно изменять в пределах лимитов проекта
```
-->

![Структура проектов](../../images/multitenancy(test)/project-structure.svg "Структура проектов")

## Имя проекта

Имя [проекта](glossary.html#проект) — уникальный идентификатор проекта в Deckhouse Kubernetes Platform. Оно используется при создании [основного проектного пространства имён](glossary.html#основное-проектное-пространство-имён) и [дополнительного проектного пространств имён](glossary.html#дополнительное-проектное-пространство-имён).

При создании проекта создаётся основное проектное пространство имён с таким же именем, как у проекта.

При создании дополнительного проектного пространства имён внутри проекта к его имени добавляется префикс `<project-name>-`. Таким образом, полное имя дополнительного проектного пространства имён будет выглядеть как `<project-name>-<project-namespace-name>`, где `<project-name>` — имя проекта, а `<project-namespace-name>` — имя дополнительного проектного пространства имён.

Имя проекта в Deckhouse Kubernetes Platform имеет следующие ограничения:
- Длина имени не более 61 символа.
- Допустимые символы в имени:
  - Буквы: a-z, A-Z
  - Цифры: 0-9
  - Дефис: "-"
  - Точка: "."
- Имя должно начинаться и заканчиваться буквой или цифрой, но не может состоять только из цифр.
- Не должно начинаться с `d8-` или `kube-`.

## Типичные сценарии применения

[Проекты](glossary.html#проект) помогают выделять в кластере изолированные области для приложений и команд с собственными ресурсами, правами и уровнями доступа. Администратор кластера создаёт проект по шаблону, назначает квоты и роли, после чего команда самостоятельно управляет [полезной нагрузкой](glossary.html#полезная-нагрузка) внутри проекта. Настройки можно расширять или ограничивать по мере необходимости.

### Выделение изолированной области кластера под полезную нагрузку

Проекты позволяют администратору кластера создавать изолированные области для [делегирования управления](#делегирование-управления) полезной нагрузкой пользователям:

- Пользователь обращается к администратору кластера с запросом на создание проекта под его приложение.
- Администратор создаёт проект: настраивает квоты/лимиты и уровни доступа в соответствии с [шаблоном](#шаблонизация), назначает пользователя администратором проекта.
- Пользователь (администратор проекта) развёртывает приложение и управляет его ресурсами в рамках назначенных прав.
- По мере роста потребностей пользователь запрашивает корректировки; администратор кластера меняет квоты и политики не затрагивая другие проекты.

Таким образом вся полезная нагрузка в кластере будет изолирована от других приложений, а её лимиты и уровни доступа будут легко регулироваться администратором кластера.

### Разделение проекта на дополнительные проектные пространства имён

Когда у приложения есть части с разными командами или жизненными циклами, проект можно удобно разделить [дополнительными проектными пространствами имён](glossary.html#дополнительное-проектное-пространство-имён). Таким образом над одним приложением смогут изолированно работать различные команды, и для каждой части приложения будут выделены свои лимиты ресурсов.

- В приложении MyApp есть frontend и backend-часть с набором соответствующих ресурсов.
- Администратор проекта добавляет в проект `myapp` дополнительные проектные пространства имён: `myapp-front` и `myapp-back`.
- Для каждого дополнительного проектного пространства имён задаются уровни доступа и квоты — команда frontend-разработчиков может использовать ресурсы внутри `myapp-front`, но не внутри `myapp-back`.

### Разграничение полезной нагрузки по возможностям проекта

Используя [возможности проектов](../architecture/projects.html#возможности-проектов) можно разделить полезную нагрузку так, чтобы одни пользователи работали только с виртуальными машинами, а другие — только с контейнерными приложениями:

- Администратор проекта `myproject` создаёт два дополнительных проектных пространства имён: `myproject-vm` и `myproject-app`.
- Для каждого из дополнительных проектных пространств имён задаются определённые возможности проекта:
  - Пользователи внутри `myproject-vm` могут использовать только виртуальные машины.
  - Пользователи внутри `myproject-app` могут использовать только контейнерные приложения.

Таким образом в одном проекте сосуществуют контейнерные приложения и ВМ, разделённые по пространствам имён и правам. Квоты и доступы управляются централизованно на уровне проекта, а команды работают автономно в пределах выданных полномочий.

![Сценарии применения](../../images/multitenancy(test)/use-cases.svg "Сценарии применения")

Таким образом оба дополнительных проектных пространства имён изолированы друг от друга, имеют различные уровни доступа и квоты внутри проекта.

<!--

> Старое описание:

Типичный сценарий применения проектов заключается в разделении существующего [пользовательского пространства имён](glossary.html#пользовательское-пространство-имён) на несколько связанных между собой, которые могут быть выделены для разных команд или сервисов. Рассмотрим пример разделения пользовательского приложения, развернутого в пространстве имен `myapp`.

В приложении MyApp есть frontend и backend-часть с набором соответствующих ресурсов. При помощи [дополнительных проектных пространств имён](glossary.html#дополнительное-проектное-пространство-имён) можно выделить в [проекте](glossary.html#проект) две части, изолировав frontend и backend друг от друга. При этом на них будут распространяться квоты проекта, если они не заданы для каждого дополнительного пространства имён проекта явно:

```text
Рабочий вариант схемы, будет изменён позже.

Project: delivery
      └─ Namespace: delivery          ← Основное пространство имён
            ├─ Deployment: frontend
            └─ Deployment: backend
```

```text
Рабочий вариант схемы, будет изменён позже.

Project: delivery
│     └─ Namespace: delivery                                           ← Основное пространство имён
│           └─ ResourceQuota (4 CPU, 40 GiB RAM, 2 ProjectNamespaces)  ← Ограничение ресурсов проекта
│
├─ ProjectNamespace: delivery-front
│     └─ Namespace: delivery-front                ← Проектное пространство имён, изолированная часть приложения, относящаяся к frontend.
│           ├─ ResourceQuota (1 CPU, 10 GiB RAM)  ← Ограничение ресурсов проектного пространства имён (не превышает квоты проекта)
│           └─ Deployment: frontend
│
├─ ProjectNamespace: delivery-front
      └─ Namespace: delivery-front                ← Проектное пространство имён, изолированная часть приложения, относящаяся к backend.
            ├─ ResourceQuota (3 CPU, 30 GiB RAM)  ← Ограничение ресурсов проектного пространства имён (не превышает квоты проекта)
            └─ Deployment: backend
```

![Сценарии применения](../../images/multitenancy(test)/use-cases.svg "Сценарии применения")

Данное разделение поможет распределить доступные проекту ресурсы, а также разграничить уровни доступа между пользователями внутри проекта. Если администратор платформы ограничит доступ к ресурсам дополнительного проектного пространства имён `myapp-front`, то пользователи, имеющие доступ к дополнительному проектному пространству имён `myapp-back`, не будут иметь доступ к ресурсам `myapp-front`.
-->

## Дополнительные ресурсы

- [Управление проектами](../admin/projects.html)
- [Управление полезной нагрузкой](../user/projects.html)
- [Архитектура проектов](../architecture/projects.html)
