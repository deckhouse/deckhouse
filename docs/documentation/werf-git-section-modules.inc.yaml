# werf git section for modules build
- add: /modules
  to: /src/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  excludePaths:
  - '*/openapi/values.yaml'
  - '*/openapi/*-tests.yaml'
  - '*/docs/internal/'
  - '040-node-manager/crds/deckhousecontrolplane.yaml'
  - '040-node-manager/crds/mcm.yaml'
  - '040-node-manager/crds/cluster.yaml'
  - '040-node-manager/crds/extension-config.yaml'
  - '040-node-manager/crds/machine.yaml'
  - '040-node-manager/crds/machine-*.yaml'
  - '040-node-manager/crds/staticcluster.yaml'
  - '040-node-manager/crds/staticcontrolplane.yaml'
  - '040-node-manager/crds/staticmachine*.yaml'
  - '110-istio/crds/istio'
  includePaths: ['*/docs/','*/openapi/*.yaml','*/crds/', '*/oss.yaml']
{{- if or (eq .Edition "BE") (eq .Edition "SE-plus") (eq .Edition "SE") (eq .Edition "EE") (eq .Edition "FE") (eq .Mode "development") }}
- add: /ee/be/modules
  to: /src/be/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  includePaths: ['*/docs/','*/openapi/*.yaml','*/crds/', '*/oss.yaml']
  excludePaths: ['*/openapi/values.yaml', '*/openapi/*-tests.yaml', '*/docs/internal/']
{{- end }}
{{- if or (eq .Edition "SE") (eq .Edition "SE-plus") (eq .Edition "EE") (eq .Edition "FE") (eq .Mode "development") }}
- add: /ee/se/modules
  to: /src/se/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  includePaths: ['*/docs/','*/openapi/*.yaml','*/crds/', '*/oss.yaml']
  excludePaths: ['*/openapi/values.yaml', '*/openapi/*-tests.yaml', '*/docs/internal/']
- add: /ee/se-plus/modules
  to: /src/se-plus/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  includePaths: ['*/docs/','*/openapi/*.yaml','*/crds/', '*/oss.yaml']
  excludePaths: ['*/openapi/values.yaml', '*/openapi/*-tests.yaml', '*/docs/internal/']
{{- end }}
{{- if or (eq .Edition "EE") (eq .Edition "FE") (eq .Mode "development") }}
- add: /ee/modules
  to: /src/ee/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  includePaths: ['*/docs/','*/openapi/*.yaml','*/crds/', '*/oss.yaml']
  excludePaths: ['*/openapi/values.yaml', '*/openapi/*-tests.yaml', '*/docs/internal/', '160-multitenancy-manager/crds/projecttypes.yaml', '160-multitenancy-manager/crds/doc-ru-projecttypes.yaml']
- add: /ee/candi/cloud-providers/vcd/openapi
  to: /src/ee/modules/030-cloud-provider-vcd/crds
  owner: jekyll
  group: jekyll
  includePaths: ['*instance_class.yaml']
  stageDependencies:
    setup: ['**/*']
- add: /ee/candi/cloud-providers/vcd/openapi
  to: /src/ee/modules/030-cloud-provider-vcd/openapi
  owner: jekyll
  group: jekyll
  includePaths: ['*cluster_configuration.yaml']
  stageDependencies:
    setup: ['**/*']
{{- end }}
{{- if or (eq .Edition "FE") (eq .Mode "development")  }}
- add: /ee/fe/modules
  to: /src/fe/modules
  owner: jekyll
  group: jekyll
  stageDependencies:
    setup: ['**/*']
  includePaths: ['*/docs/','*/openapi/','*/crds/', '*/oss.yaml']
  excludePaths: ['*/openapi/values.yaml', '*/openapi/*-tests.yaml''*/docs/internal/']
{{- end }}
# CRDs
- add: /ee/candi/cloud-providers/vcd/docs
  to: /src/ee/modules/030-cloud-provider-vcd/docs
  owner: jekyll
  group: jekyll
  includePaths: ['LAYOUTS*.md','ENVIRONMENT*.md','CLUSTER_CONFIGURATION*.md']
  stageDependencies:
    setup: ['**/*']
- add: /candi/cloud-providers/dvp/openapi
  to: /src/modules/030-cloud-provider-dvp/crds
  owner: jekyll
  group: jekyll
  includePaths: ['*instance_class.yaml']
  stageDependencies:
    setup: ['**/*']
- add: /candi/cloud-providers/dvp/openapi
  to: /src/modules/030-cloud-provider-dvp/openapi
  owner: jekyll
  group: jekyll
  includePaths: ['*cluster_configuration.yaml']
  stageDependencies:
    setup: ['**/*']
- add: /candi/cloud-providers/dvp/docs
  to: /src/modules/030-cloud-provider-dvp/docs
  owner: jekyll
  group: jekyll
  includePaths: ['LAYOUTS*.md','ENVIRONMENT*.md','CLUSTER_CONFIGURATION*.md']
  stageDependencies:
    setup: ['**/*']
